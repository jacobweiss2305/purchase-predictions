

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>kedro.framework.cli.pipeline &mdash; Kedro 0.17.6 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/qb1-sphinx-rtd.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/theme-overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
<script type="text/javascript">
  window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])};
  heap.load(2164194004);
</script>


  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> Kedro
          

          
            
            <img src="../../../../_static/kedro_logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.17
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../01_introduction/01_introduction.html">What is Kedro?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../01_introduction/01_introduction.html#learn-how-to-use-kedro">Learn how to use Kedro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../01_introduction/01_introduction.html#assumptions">Assumptions</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../02_get_started/01_prerequisites.html">Installation prerequisites</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/01_prerequisites.html#virtual-environments">Virtual environments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../02_get_started/01_prerequisites.html#conda"><code class="docutils literal notranslate"><span class="pre">conda</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../02_get_started/01_prerequisites.html#venv-instead-of-conda"><code class="docutils literal notranslate"><span class="pre">venv</span></code> (instead of <code class="docutils literal notranslate"><span class="pre">conda</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../02_get_started/01_prerequisites.html#pipenv-instead-of-conda"><code class="docutils literal notranslate"><span class="pre">pipenv</span></code> (instead of <code class="docutils literal notranslate"><span class="pre">conda</span></code>)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../02_get_started/02_install.html">Install Kedro</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/02_install.html#verify-a-successful-installation">Verify a successful installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/02_install.html#install-a-development-version">Install a development version</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../02_get_started/03_hello_kedro.html">A “Hello World” example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/03_hello_kedro.html#node">Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/03_hello_kedro.html#pipeline">Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/03_hello_kedro.html#datacatalog">DataCatalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/03_hello_kedro.html#runner">Runner</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/03_hello_kedro.html#hello-kedro">Hello Kedro!</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../02_get_started/04_new_project.html">Create a new project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/04_new_project.html#create-a-new-project-interactively">Create a new project interactively</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/04_new_project.html#create-a-new-project-from-a-configuration-file">Create a new project from a configuration file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/04_new_project.html#initialise-a-git-repository">Initialise a <code class="docutils literal notranslate"><span class="pre">git</span></code> repository</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../02_get_started/05_example_project.html">Iris dataset example project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/05_example_project.html#create-the-example-project">Create the example project</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../02_get_started/05_example_project.html#project-directory-structure">Project directory structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../02_get_started/05_example_project.html#conf"><code class="docutils literal notranslate"><span class="pre">conf/</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../02_get_started/05_example_project.html#data"><code class="docutils literal notranslate"><span class="pre">data</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../02_get_started/05_example_project.html#src"><code class="docutils literal notranslate"><span class="pre">src</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../02_get_started/05_example_project.html#what-best-practice-should-i-follow-to-avoid-leaking-confidential-data">What best practice should I follow to avoid leaking confidential data?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/05_example_project.html#run-the-example-project">Run the example project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/05_example_project.html#under-the-hood-pipelines-and-nodes">Under the hood: Pipelines and nodes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../02_get_started/06_starters.html">Kedro starters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/06_starters.html#how-to-use-kedro-starters">How to use Kedro starters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../02_get_started/06_starters.html#starter-aliases">Starter aliases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/06_starters.html#list-of-official-starters">List of official starters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/06_starters.html#starter-versioning">Starter versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/06_starters.html#use-a-starter-in-interactive-mode">Use a starter in interactive mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../02_get_started/06_starters.html#use-a-starter-with-a-configuration-file">Use a starter with a configuration file</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../03_tutorial/01_spaceflights_tutorial.html">Kedro spaceflights tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/01_spaceflights_tutorial.html#kedro-project-development-workflow">Kedro project development workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/01_spaceflights_tutorial.html#set-up-the-project-template">1. Set up the project template</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/01_spaceflights_tutorial.html#set-up-the-data">2. Set up the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/01_spaceflights_tutorial.html#create-the-pipeline">3. Create the pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/01_spaceflights_tutorial.html#package-the-project">4. Package the project</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/01_spaceflights_tutorial.html#optional-git-workflow">Optional: Git workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/01_spaceflights_tutorial.html#create-a-project-repository">Create a project repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/01_spaceflights_tutorial.html#submit-your-changes-to-github">Submit your changes to GitHub</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../03_tutorial/02_tutorial_template.html">Set up the spaceflights project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/02_tutorial_template.html#create-a-new-project">Create a new project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/02_tutorial_template.html#install-project-dependencies-with-kedro-install">Install project dependencies with <code class="docutils literal notranslate"><span class="pre">kedro</span> <span class="pre">install</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/02_tutorial_template.html#more-about-project-dependencies">More about project dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/02_tutorial_template.html#add-and-remove-project-specific-dependencies">Add and remove project-specific dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/02_tutorial_template.html#configure-the-project">Configure the project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../03_tutorial/03_set_up_data.html">Set up the data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/03_set_up_data.html#add-your-datasets-to-data">Add your datasets to <code class="docutils literal notranslate"><span class="pre">data</span></code></a><ul>
<li class="toctree-l3"><a class="reference external" href="https://quantumblacklabs.github.io/kedro/reviews.csv">reviews.csv</a></li>
<li class="toctree-l3"><a class="reference external" href="https://quantumblacklabs.github.io/kedro/companies.csv">companies.csv</a></li>
<li class="toctree-l3"><a class="reference external" href="https://quantumblacklabs.github.io/kedro/shuttles.xlsx">shuttles.xlsx</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/03_set_up_data.html#register-the-datasets">Register the datasets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/03_set_up_data.html#csv"><code class="docutils literal notranslate"><span class="pre">csv</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/03_set_up_data.html#xlsx"><code class="docutils literal notranslate"><span class="pre">xlsx</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/03_set_up_data.html#custom-data">Custom data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html">Create a pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#data-processing-pipeline">Data processing pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#node-functions">Node functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#assemble-nodes-into-the-data-processing-pipeline">Assemble nodes into the data processing pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#update-the-project-pipeline">Update the project pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#test-the-example">Test the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#persist-pre-processed-data">Persist pre-processed data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#extend-the-data-processing-pipeline">Extend the data processing pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#id1">Test the example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#data-science-pipeline">Data science pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#update-dependencies">Update dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#create-a-data-science-node">Create a data science node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#configure-the-input-parameters">Configure the input parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#register-the-dataset">Register the dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#assemble-the-data-science-pipeline">Assemble the data science pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#id2">Update the project pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#test-the-pipelines">Test the pipelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#kedro-runners">Kedro runners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/04_create_pipelines.html#slice-a-pipeline">Slice a pipeline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../03_tutorial/05_package_a_project.html">Package a project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/05_package_a_project.html#add-documentation-to-your-project">Add documentation to your project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/05_package_a_project.html#package-your-project">Package your project</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../03_tutorial/05_package_a_project.html#docker-and-airflow">Docker and Airflow</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../03_tutorial/06_visualise_pipeline.html">Visualise pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/06_visualise_pipeline.html#install-kedro-viz">Install Kedro-Viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/06_visualise_pipeline.html#visualise-a-whole-pipeline">Visualise a whole pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/06_visualise_pipeline.html#exit-an-open-visualisation">Exit an open visualisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/06_visualise_pipeline.html#visualise-layers">Visualise layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../03_tutorial/06_visualise_pipeline.html#share-a-pipeline">Share a pipeline</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Kedro project setup</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../04_kedro_project_setup/01_dependencies.html">Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/01_dependencies.html#project-specific-dependencies">Project-specific dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/01_dependencies.html#kedro-install"><code class="docutils literal notranslate"><span class="pre">kedro</span> <span class="pre">install</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/01_dependencies.html#workflow-dependencies">Workflow dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../04_kedro_project_setup/01_dependencies.html#install-dependencies-related-to-the-data-catalog">Install dependencies related to the Data Catalog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../04_kedro_project_setup/01_dependencies.html#install-dependencies-at-a-group-level">Install dependencies at a group-level</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../04_kedro_project_setup/01_dependencies.html#install-dependencies-at-a-type-level">Install dependencies at a type-level</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../04_kedro_project_setup/02_configuration.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/02_configuration.html#configuration-root">Configuration root</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/02_configuration.html#local-and-base-configuration-environments">Local and base configuration environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/02_configuration.html#additional-configuration-environments">Additional configuration environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/02_configuration.html#template-configuration">Template configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../04_kedro_project_setup/02_configuration.html#jinja2-support">Jinja2 support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/02_configuration.html#parameters">Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../04_kedro_project_setup/02_configuration.html#load-parameters">Load parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../04_kedro_project_setup/02_configuration.html#specify-parameters-at-runtime">Specify parameters at runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../04_kedro_project_setup/02_configuration.html#use-parameters">Use parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/02_configuration.html#credentials">Credentials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../04_kedro_project_setup/02_configuration.html#aws-credentials">AWS credentials</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/02_configuration.html#configure-kedro-run-arguments">Configure <code class="docutils literal notranslate"><span class="pre">kedro</span> <span class="pre">run</span></code> arguments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../04_kedro_project_setup/03_session.html">Lifecycle management with <code class="docutils literal notranslate"><span class="pre">KedroSession</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/03_session.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/03_session.html#create-a-session">Create a session</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../04_kedro_project_setup/04_mini_kedro.html">The <code class="docutils literal notranslate"><span class="pre">mini-kedro</span></code> Kedro starter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/04_mini_kedro.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/04_mini_kedro.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../04_kedro_project_setup/04_mini_kedro.html#content">Content</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Data Catalog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../05_data/01_data_catalog.html">The Data Catalog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#using-the-data-catalog-within-kedro-configuration">Using the Data Catalog within Kedro configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#specifying-the-location-of-the-dataset">Specifying the location of the dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#data-catalog-args-parameters">Data Catalog <code class="docutils literal notranslate"><span class="pre">*_args</span></code> parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#using-the-data-catalog-with-the-yaml-api">Using the Data Catalog with the YAML API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#creating-a-data-catalog-yaml-configuration-file-via-cli">Creating a Data Catalog YAML configuration file via CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#adding-parameters">Adding parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#feeding-in-credentials">Feeding in credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#loading-multiple-datasets-that-have-similar-configuration">Loading multiple datasets that have similar configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#transcoding-datasets">Transcoding datasets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#a-typical-example-of-transcoding">A typical example of transcoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#how-does-transcoding-work">How does transcoding work?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#transforming-datasets">Transforming datasets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#applying-built-in-transformers">Applying built-in transformers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#transformer-scope">Transformer scope</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#versioning-datasets-and-ml-models">Versioning datasets and ML models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#using-the-data-catalog-with-the-code-api">Using the Data Catalog with the Code API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#configuring-a-data-catalog">Configuring a Data Catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#loading-datasets">Loading datasets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#behind-the-scenes">Behind the scenes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#viewing-the-available-data-sources">Viewing the available data sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#saving-data">Saving data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#saving-data-to-memory">Saving data to memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#saving-data-to-a-sql-database-for-querying">Saving data to a SQL database for querying</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../05_data/01_data_catalog.html#saving-data-in-parquet">Saving data in Parquet</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../05_data/02_kedro_io.html">Kedro IO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#error-handling">Error handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#abstractdataset">AbstractDataSet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#versioning">Versioning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#version-namedtuple"><code class="docutils literal notranslate"><span class="pre">version</span></code> namedtuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#versioning-using-the-yaml-api">Versioning using the YAML API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#versioning-using-the-code-api">Versioning using the Code API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#supported-datasets">Supported datasets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#partitioned-dataset">Partitioned dataset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#partitioned-dataset-definition">Partitioned dataset definition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#dataset-definition">Dataset definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#partitioned-dataset-credentials">Partitioned dataset credentials</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#partitioned-dataset-load">Partitioned dataset load</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#partitioned-dataset-save">Partitioned dataset save</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#incremental-loads-with-incrementaldataset">Incremental loads with <code class="docutils literal notranslate"><span class="pre">IncrementalDataSet</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#incremental-dataset-load">Incremental dataset load</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#incremental-dataset-save">Incremental dataset save</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#incremental-dataset-confirm">Incremental dataset confirm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#checkpoint-configuration">Checkpoint configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../05_data/02_kedro_io.html#special-checkpoint-config-keys">Special checkpoint config keys</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Nodes and pipelines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../06_nodes_and_pipelines/01_nodes.html">Nodes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/01_nodes.html#how-to-create-a-node">How to create a node</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/01_nodes.html#node-definition-syntax">Node definition syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/01_nodes.html#syntax-for-input-variables">Syntax for input variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/01_nodes.html#syntax-for-output-variables">Syntax for output variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/01_nodes.html#how-to-tag-a-node">How to tag a node</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/01_nodes.html#how-to-run-a-node">How to run a node</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../06_nodes_and_pipelines/02_pipeline_introduction.html">Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/02_pipeline_introduction.html#how-to-build-a-pipeline">How to build a pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/02_pipeline_introduction.html#how-to-tag-a-pipeline">How to tag a pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/02_pipeline_introduction.html#how-to-merge-multiple-pipelines">How to merge multiple pipelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/02_pipeline_introduction.html#information-about-the-nodes-in-a-pipeline">Information about the nodes in a pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/02_pipeline_introduction.html#information-about-pipeline-inputs-and-outputs">Information about pipeline inputs and outputs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/02_pipeline_introduction.html#bad-pipelines">Bad pipelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/02_pipeline_introduction.html#pipeline-with-bad-nodes">Pipeline with bad nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/02_pipeline_introduction.html#pipeline-with-circular-dependencies">Pipeline with circular dependencies</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html">Modular pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#what-are-modular-pipelines">What are modular pipelines?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#how-do-i-create-a-modular-pipeline">How do I create a modular pipeline?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#recommendations">Recommendations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#how-to-share-a-modular-pipeline">How to share a modular pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#package-a-modular-pipeline">Package a modular pipeline</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#package-multiple-modular-pipelines">Package multiple modular pipelines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#pull-a-modular-pipeline">Pull a modular pipeline</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#pull-multiple-modular-pipelines">Pull multiple modular pipelines</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#a-modular-pipeline-example-template">A modular pipeline example template</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#datasets">Datasets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#how-to-connect-existing-pipelines">How to connect existing pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#how-to-use-a-modular-pipeline-twice">How to use a modular pipeline twice</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#how-to-use-a-modular-pipeline-with-different-parameters">How to use a modular pipeline with different parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/03_modular_pipelines.html#how-to-clean-up-a-modular-pipeline">How to clean up a modular pipeline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../06_nodes_and_pipelines/04_run_a_pipeline.html">Run a pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/04_run_a_pipeline.html#runners">Runners</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/04_run_a_pipeline.html#sequentialrunner"><code class="docutils literal notranslate"><span class="pre">SequentialRunner</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../06_nodes_and_pipelines/04_run_a_pipeline.html#parallelrunner"><code class="docutils literal notranslate"><span class="pre">ParallelRunner</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../06_nodes_and_pipelines/04_run_a_pipeline.html#multiprocessing">Multiprocessing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../06_nodes_and_pipelines/04_run_a_pipeline.html#multithreading">Multithreading</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/04_run_a_pipeline.html#custom-runners">Custom runners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/04_run_a_pipeline.html#load-and-save-asynchronously">Load and save asynchronously</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/04_run_a_pipeline.html#run-a-pipeline-by-name">Run a pipeline by name</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/04_run_a_pipeline.html#run-pipelines-with-io">Run pipelines with IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/04_run_a_pipeline.html#output-to-a-file">Output to a file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../06_nodes_and_pipelines/05_slice_a_pipeline.html">Slice a pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/05_slice_a_pipeline.html#slice-a-pipeline-by-providing-inputs">Slice a pipeline by providing inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/05_slice_a_pipeline.html#slice-a-pipeline-by-specifying-nodes">Slice a pipeline by specifying nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/05_slice_a_pipeline.html#slice-a-pipeline-by-specifying-final-nodes">Slice a pipeline by specifying final nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/05_slice_a_pipeline.html#slice-a-pipeline-with-tagged-nodes">Slice a pipeline with tagged nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/05_slice_a_pipeline.html#slice-a-pipeline-by-running-specified-nodes">Slice a pipeline by running specified nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../06_nodes_and_pipelines/05_slice_a_pipeline.html#how-to-recreate-missing-outputs">How to recreate missing outputs</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Extend Kedro</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../07_extend_kedro/01_common_use_cases.html">Common use cases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/01_common_use_cases.html#use-case-1-how-to-add-extra-behaviour-to-kedro-s-execution-timeline">Use Case 1: How to add extra behaviour to Kedro’s execution timeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/01_common_use_cases.html#use-case-2-how-to-integrate-kedro-with-additional-data-sources">Use Case 2: How to integrate Kedro with additional data sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/01_common_use_cases.html#use-case-3-how-to-add-cli-commands-that-are-reusable-across-projects">Use Case 3: How to add CLI commands that are reusable across projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/01_common_use_cases.html#use-case-4-how-to-customise-the-initial-boilerplate-of-your-project">Use Case 4: How to customise the initial boilerplate of your project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html">Hooks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#concepts">Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#hook-specification">Hook specification</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#execution-timeline-hooks">Execution timeline Hooks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#registration-hooks">Registration Hooks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#hook-implementation">Hook implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#registering-your-hook-implementations-with-kedro">Registering your Hook implementations with Kedro</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#disable-auto-registered-plugins-hooks">Disable auto-registered plugins’ Hooks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#common-use-cases">Common use cases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#use-hooks-to-extend-a-node-s-behaviour">Use Hooks to extend a node’s behaviour</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#use-hooks-to-customise-the-dataset-load-and-save-methods">Use Hooks to customise the dataset load and save methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#under-the-hood">Under the hood</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#hooks-examples">Hooks examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#add-memory-consumption-tracking">Add memory consumption tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#add-data-validation">Add data validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#add-observability-to-your-pipeline">Add observability to your pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#add-metrics-tracking-to-your-model">Add metrics tracking to your model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../07_extend_kedro/02_hooks.html#modify-node-inputs-using-before-node-run-hook">Modify node inputs using <code class="docutils literal notranslate"><span class="pre">before_node_run</span></code> hook</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../07_extend_kedro/03_custom_datasets.html">Custom datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/03_custom_datasets.html#scenario">Scenario</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/03_custom_datasets.html#project-setup">Project setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/03_custom_datasets.html#the-anatomy-of-a-dataset">The anatomy of a dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/03_custom_datasets.html#implement-the-load-method-with-fsspec">Implement the <code class="docutils literal notranslate"><span class="pre">_load</span></code> method with <code class="docutils literal notranslate"><span class="pre">fsspec</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/03_custom_datasets.html#implement-the-save-method-with-fsspec">Implement the <code class="docutils literal notranslate"><span class="pre">_save</span></code> method with <code class="docutils literal notranslate"><span class="pre">fsspec</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/03_custom_datasets.html#implement-the-describe-method">Implement the <code class="docutils literal notranslate"><span class="pre">_describe</span></code> method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/03_custom_datasets.html#the-complete-example">The complete example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/03_custom_datasets.html#integration-with-partitioneddataset">Integration with <code class="docutils literal notranslate"><span class="pre">PartitionedDataSet</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/03_custom_datasets.html#versioning">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/03_custom_datasets.html#thread-safety">Thread-safety</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/03_custom_datasets.html#how-to-handle-credentials-and-different-filesystems">How to handle credentials and different filesystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/03_custom_datasets.html#how-to-contribute-a-custom-dataset-implementation">How to contribute a custom dataset implementation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../07_extend_kedro/04_plugins.html">Kedro plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/04_plugins.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/04_plugins.html#example-of-a-simple-plugin">Example of a simple plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/04_plugins.html#working-with-click">Working with <code class="docutils literal notranslate"><span class="pre">click</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/04_plugins.html#project-context">Project context</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/04_plugins.html#initialisation">Initialisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/04_plugins.html#global-and-project-commands"><code class="docutils literal notranslate"><span class="pre">global</span></code> and <code class="docutils literal notranslate"><span class="pre">project</span></code> commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/04_plugins.html#suggested-command-convention">Suggested command convention</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/04_plugins.html#hooks">Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/04_plugins.html#cli-hooks">CLI Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/04_plugins.html#contributing-process">Contributing process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/04_plugins.html#supported-kedro-plugins">Supported Kedro plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/04_plugins.html#community-developed-plugins">Community-developed plugins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../07_extend_kedro/05_create_kedro_starters.html">Create a Kedro starter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/05_create_kedro_starters.html#how-to-create-a-kedro-starter">How to create a Kedro starter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/05_create_kedro_starters.html#configuration-variables">Configuration variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../07_extend_kedro/05_create_kedro_starters.html#example-kedro-starter">Example Kedro starter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../07_extend_kedro/06_transformers.html">Dataset transformers (deprecated)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/06_transformers.html#develop-your-own-dataset-transformer">Develop your own dataset transformer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../07_extend_kedro/07_decorators.html">Decorators (deprecated)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/07_decorators.html#how-to-apply-a-decorator-to-nodes">How to apply a decorator to nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/07_decorators.html#how-to-apply-multiple-decorators-to-nodes">How to apply multiple decorators to nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/07_decorators.html#how-to-apply-a-decorator-to-a-pipeline">How to apply a decorator to a pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../07_extend_kedro/07_decorators.html#kedro-decorators">Kedro decorators</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Logging</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../08_logging/01_logging.html">Logging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../08_logging/01_logging.html#configure-logging">Configure logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../08_logging/01_logging.html#use-logging">Use logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../08_logging/01_logging.html#logging-for-anyconfig">Logging for <code class="docutils literal notranslate"><span class="pre">anyconfig</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../08_logging/02_experiment_tracking.html">Experiment tracking</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../08_logging/02_experiment_tracking.html#enable-experiment-tracking">Enable experiment tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../08_logging/02_experiment_tracking.html#community-solutions">Community solutions</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../09_development/01_set_up_vscode.html">Set up Visual Studio Code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/01_set_up_vscode.html#advanced-for-those-using-venv-virtualenv">Advanced: For those using <code class="docutils literal notranslate"><span class="pre">venv</span></code> / <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/01_set_up_vscode.html#setting-up-tasks">Setting up tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/01_set_up_vscode.html#debugging">Debugging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../09_development/01_set_up_vscode.html#advanced-remote-interpreter-debugging">Advanced: Remote Interpreter / Debugging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/01_set_up_vscode.html#configuring-the-kedro-catalog-validation-schema">Configuring the Kedro catalog validation schema</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../09_development/02_set_up_pycharm.html">Set up PyCharm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/02_set_up_pycharm.html#set-up-run-configurations">Set up Run configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/02_set_up_pycharm.html#debugging">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/02_set_up_pycharm.html#advanced-remote-ssh-interpreter">Advanced: Remote SSH interpreter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/02_set_up_pycharm.html#advanced-docker-interpreter">Advanced: Docker interpreter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/02_set_up_pycharm.html#configure-python-console">Configure Python Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/02_set_up_pycharm.html#configuring-the-kedro-catalog-validation-schema">Configuring the Kedro catalog validation schema</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../09_development/03_commands_reference.html">Kedro’s command line interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#autocompletion-optional">Autocompletion (optional)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#invoke-kedro-cli-from-python-optional">Invoke Kedro CLI from Python (optional)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#kedro-commands">Kedro commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#global-kedro-commands">Global Kedro commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#get-help-on-kedro-commands">Get help on Kedro commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#confirm-the-kedro-version">Confirm the Kedro version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#confirm-kedro-information">Confirm Kedro information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#create-a-new-kedro-project">Create a new Kedro project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#open-the-kedro-documentation-in-your-browser">Open the Kedro documentation in your browser</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#project-specific-kedro-commands">Project-specific Kedro commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#project-setup">Project setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#build-the-project-s-dependency-tree">Build the project’s dependency tree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#install-all-package-dependencies">Install all package dependencies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#run-the-project">Run the project</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#modifying-a-kedro-run">Modifying a <code class="docutils literal notranslate"><span class="pre">kedro</span> <span class="pre">run</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#deploy-the-project">Deploy the project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#pull-a-modular-pipeline">Pull a modular pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#project-quality">Project quality</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#build-the-project-documentation">Build the project documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#lint-your-project">Lint your project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#test-your-project">Test your project</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#project-development">Project development</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#modular-pipelines">Modular pipelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#datasets">Datasets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#data-catalog">Data Catalog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../09_development/03_commands_reference.html#notebooks">Notebooks</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../09_development/04_lint.html">Linting your Kedro project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../09_development/05_debugging.html">Debugging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/05_debugging.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/05_debugging.html#debugging-node">Debugging Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../09_development/05_debugging.html#debugging-pipeline">Debugging Pipeline</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Deployment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../10_deployment/01_deployment_guide.html">Deployment guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/01_deployment_guide.html#deployment-choices">Deployment choices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../10_deployment/02_single_machine.html">Single-machine deployment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/02_single_machine.html#container-based">Container based</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/02_single_machine.html#how-to-use-container-registry">How to use container registry</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/02_single_machine.html#package-based">Package based</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/02_single_machine.html#cli-based">CLI based</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/02_single_machine.html#use-github-workflow-to-copy-your-project">Use GitHub workflow to copy your project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/02_single_machine.html#install-and-run-the-kedro-project">Install and run the Kedro project</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../10_deployment/03_distributed.html">Distributed deployment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/03_distributed.html#containerise-the-pipeline">1. Containerise the pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/03_distributed.html#convert-your-kedro-pipeline-into-targeted-platform-s-primitives">2. Convert your Kedro pipeline into targeted platform’s primitives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/03_distributed.html#parameterise-the-runs">3. Parameterise the runs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/03_distributed.html#optional-create-starters">4. (Optional) Create starters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../10_deployment/04_argo.html">Deployment with Argo Workflows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/04_argo.html#why-would-you-use-argo-workflows">Why would you use Argo Workflows?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/04_argo.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/04_argo.html#how-to-run-your-kedro-pipeline-using-argo-workflows">How to run your Kedro pipeline using Argo Workflows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/04_argo.html#containerise-your-kedro-project">Containerise your Kedro project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/04_argo.html#create-argo-workflows-spec">Create Argo Workflows spec</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/04_argo.html#submit-argo-workflows-spec-to-kubernetes">Submit Argo Workflows spec to Kubernetes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/04_argo.html#kedro-argo-plugin">Kedro-Argo plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../10_deployment/05_prefect.html">Deployment with Prefect</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/05_prefect.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/05_prefect.html#how-to-run-your-kedro-pipeline-using-prefect">How to run your Kedro pipeline using Prefect</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/05_prefect.html#convert-your-kedro-pipeline-to-prefect-flow">Convert your Kedro pipeline to Prefect flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/05_prefect.html#run-prefect-flow">Run Prefect flow</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../10_deployment/06_kubeflow.html">Deployment with Kubeflow Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/06_kubeflow.html#why-would-you-use-kubeflow-pipelines">Why would you use Kubeflow Pipelines?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/06_kubeflow.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/06_kubeflow.html#how-to-run-your-kedro-pipeline-using-kubeflow-pipelines">How to run your Kedro pipeline using Kubeflow Pipelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/06_kubeflow.html#containerise-your-kedro-project">Containerise your Kedro project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/06_kubeflow.html#create-a-workflow-spec">Create a workflow spec</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/06_kubeflow.html#authenticate-kubeflow-pipelines">Authenticate Kubeflow Pipelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/06_kubeflow.html#upload-workflow-spec-and-execute-runs">Upload workflow spec and execute runs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html">Deployment with AWS Batch</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#why-would-you-use-aws-batch">Why would you use AWS Batch?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#how-to-run-a-kedro-pipeline-using-aws-batch">How to run a Kedro pipeline using AWS Batch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#containerise-your-kedro-project">Containerise your Kedro project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#provision-resources">Provision resources</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#create-iam-role">Create IAM Role</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#create-aws-batch-job-definition">Create AWS Batch job definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#create-aws-batch-compute-environment">Create AWS Batch compute environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#create-aws-batch-job-queue">Create AWS Batch job queue</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#configure-the-credentials">Configure the credentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#submit-aws-batch-jobs">Submit AWS Batch jobs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#create-a-custom-runner">Create a custom runner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#set-up-batch-related-configuration">Set up Batch-related configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#update-cli-implementation">Update CLI implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/07_aws_batch.html#deploy">Deploy</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../10_deployment/08_databricks.html">Deployment to a Databricks cluster</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#run-the-kedro-project-with-databricks-connect">Run the Kedro project with Databricks Connect</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#project-setup">1. Project setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#install-dependencies-and-run-locally">2. Install dependencies and run locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#create-a-databricks-cluster">3. Create a Databricks cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#install-databricks-connect">4. Install Databricks Connect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#configure-databricks-connect">5. Configure Databricks Connect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#copy-local-data-into-dbfs">6. Copy local data into DBFS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#run-the-project">7. Run the project</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#run-kedro-project-from-a-databricks-notebook">Run Kedro project from a Databricks notebook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#extra-requirements">Extra requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#create-kedro-project">1. Create Kedro project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#create-github-personal-access-token">2. Create GitHub personal access token</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#create-a-github-repository">3. Create a GitHub repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#push-kedro-project-to-the-github-repository">4. Push Kedro project to the GitHub repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#configure-the-databricks-cluster">5. Configure the Databricks cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/08_databricks.html#run-your-kedro-project-from-the-databricks-notebook">6. Run your Kedro project from the Databricks notebook</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html">How to integrate Amazon SageMaker into your Kedro pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#why-would-you-use-amazon-sagemaker">Why would you use Amazon SageMaker?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#prepare-the-environment">Prepare the environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#install-sagemaker-package-dependencies">Install SageMaker package dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#create-sagemaker-execution-role">Create SageMaker execution role</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#create-s3-bucket">Create S3 bucket</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#update-the-kedro-project">Update the Kedro project</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#create-the-configuration-environment">Create the configuration environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#update-the-project-hooks">Update the project hooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#update-the-data-science-pipeline">Update the data science pipeline</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#create-node-functions">Create node functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#update-the-pipeline-definition">Update the pipeline definition</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#create-the-sagemaker-entry-point">Create the SageMaker entry point</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#run-the-project">Run the project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/09_aws_sagemaker.html#cleanup">Cleanup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../10_deployment/10_aws_step_functions.html">How to deploy your Kedro pipeline with AWS Step Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/10_aws_step_functions.html#why-would-you-run-a-kedro-pipeline-with-aws-step-functions">Why would you run a Kedro pipeline with AWS Step Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/10_aws_step_functions.html#strategy">Strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/10_aws_step_functions.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/10_aws_step_functions.html#deployment-process">Deployment process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/10_aws_step_functions.html#step-1-create-new-configuration-environment-to-prepare-a-compatible-datacatalog">Step 1. Create new configuration environment to prepare a compatible <code class="docutils literal notranslate"><span class="pre">DataCatalog</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/10_aws_step_functions.html#step-2-package-the-kedro-pipeline-as-an-aws-lambda-compliant-docker-image">Step 2. Package the Kedro pipeline as an AWS Lambda-compliant Docker image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/10_aws_step_functions.html#step-3-write-the-deployment-script">Step 3. Write the deployment script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/10_aws_step_functions.html#step-4-deploy-the-pipeline">Step 4. Deploy the pipeline</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/10_aws_step_functions.html#limitations">Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/10_aws_step_functions.html#final-thought">Final thought</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../10_deployment/11_airflow_astronomer.html">How to deploy your Kedro pipeline on Apache Airflow with Astronomer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/11_airflow_astronomer.html#strategy">Strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/11_airflow_astronomer.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/11_airflow_astronomer.html#project-setup">Project Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/11_airflow_astronomer.html#deployment-process">Deployment process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/11_airflow_astronomer.html#step-1-create-new-configuration-environment-to-prepare-a-compatible-datacatalog">Step 1. Create new configuration environment to prepare a compatible <code class="docutils literal notranslate"><span class="pre">DataCatalog</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/11_airflow_astronomer.html#step-2-package-the-kedro-pipeline-as-an-astronomer-compliant-docker-image">Step 2. Package the Kedro pipeline as an Astronomer-compliant Docker image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/11_airflow_astronomer.html#step-3-convert-the-kedro-pipeline-into-an-airflow-dag-with-kedro-airflow">Step 3. Convert the Kedro pipeline into an Airflow DAG with <code class="docutils literal notranslate"><span class="pre">kedro</span> <span class="pre">airflow</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../10_deployment/11_airflow_astronomer.html#step-4-launch-the-local-airflow-cluster-with-astronomer">Step 4. Launch the local Airflow cluster with Astronomer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../10_deployment/11_airflow_astronomer.html#final-thought">Final thought</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Tools integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../11_tools_integration/01_pyspark.html">Build a Kedro pipeline with PySpark</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/01_pyspark.html#centralise-spark-configuration-in-conf-base-spark-yml">Centralise Spark configuration in <code class="docutils literal notranslate"><span class="pre">conf/base/spark.yml</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/01_pyspark.html#initialise-a-sparksession-in-custom-project-context-class">Initialise a <code class="docutils literal notranslate"><span class="pre">SparkSession</span></code> in custom project context class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/01_pyspark.html#use-kedro-s-built-in-spark-datasets-to-load-and-save-raw-data">Use Kedro’s built-in Spark datasets to load and save raw data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.extras.datasets.spark.DeltaTableDataSet.html">spark.DeltaTableDataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.extras.datasets.spark.SparkDataSet.html">spark.SparkDataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.extras.datasets.spark.SparkJDBCDataSet.html">spark.SparkJDBCDataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.extras.datasets.spark.SparkHiveDataSet.html">spark.SparkHiveDataSet</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/01_pyspark.html#spark-and-delta-lake-interaction">Spark and Delta Lake interaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/01_pyspark.html#use-memorydataset-for-intermediary-dataframe">Use <code class="docutils literal notranslate"><span class="pre">MemoryDataSet</span></code> for intermediary <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/01_pyspark.html#use-memorydataset-with-copy-mode-assign-for-non-dataframe-spark-objects">Use <code class="docutils literal notranslate"><span class="pre">MemoryDataSet</span></code> with <code class="docutils literal notranslate"><span class="pre">copy_mode=&quot;assign&quot;</span></code> for non-<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> Spark objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/01_pyspark.html#tips-for-maximising-concurrency-using-threadrunner">Tips for maximising concurrency using <code class="docutils literal notranslate"><span class="pre">ThreadRunner</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html">Use Kedro with IPython and Jupyter Notebooks/Lab</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#why-use-a-notebook">Why use a Notebook?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#kedro-and-ipython">Kedro and IPython</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#load-datacatalog-in-ipython">Load <code class="docutils literal notranslate"><span class="pre">DataCatalog</span></code> in IPython</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#dataset-versioning">Dataset versioning</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#kedro-and-jupyter">Kedro and Jupyter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#how-to-use-context">How to use <code class="docutils literal notranslate"><span class="pre">context</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#run-the-pipeline">Run the pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#parameters">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#load-save-datacatalog-in-jupyter">Load/Save <code class="docutils literal notranslate"><span class="pre">DataCatalog</span></code> in Jupyter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#additional-parameters-for-session-run">Additional parameters for <code class="docutils literal notranslate"><span class="pre">session.run()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#global-variables">Global variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#convert-functions-from-jupyter-notebooks-into-kedro-nodes">Convert functions from Jupyter Notebooks into Kedro nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#ipython-extension">IPython extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#ipython-loader">IPython loader</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#troubleshooting-and-faqs">Troubleshooting and FAQs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#how-can-i-stop-my-notebook-terminating">How can I stop my notebook terminating?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#why-can-t-i-run-kedro-jupyter-notebook">Why can’t I run <code class="docutils literal notranslate"><span class="pre">kedro</span> <span class="pre">jupyter</span> <span class="pre">notebook</span></code>?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#how-can-i-reload-the-session-context-catalog-and-startup-error-variables">How can I reload the <code class="docutils literal notranslate"><span class="pre">session</span></code>, <code class="docutils literal notranslate"><span class="pre">context</span></code>, <code class="docutils literal notranslate"><span class="pre">catalog</span></code> and <code class="docutils literal notranslate"><span class="pre">startup_error</span></code> variables?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../11_tools_integration/02_ipython.html#kedro-viz-and-jupyter">Kedro-Viz and Jupyter</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">FAQs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../12_faq/01_faq.html">Frequently asked questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/01_faq.html#what-is-kedro">What is Kedro?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/01_faq.html#who-maintains-kedro">Who maintains Kedro?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/01_faq.html#what-are-the-primary-advantages-of-kedro">What are the primary advantages of Kedro?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/01_faq.html#how-does-kedro-compare-to-other-projects">How does Kedro compare to other projects?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/01_faq.html#what-is-data-engineering-convention">What is data engineering convention?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/01_faq.html#how-do-i-upgrade-kedro">How do I upgrade Kedro?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/01_faq.html#how-can-i-use-a-development-version-of-kedro">How can I use a development version of Kedro?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/01_faq.html#how-can-i-find-out-more-about-kedro">How can I find out more about Kedro?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/01_faq.html#how-can-i-cite-kedro">How can I cite Kedro?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/01_faq.html#how-can-i-get-my-question-answered">How can I get my question answered?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../12_faq/02_architecture_overview.html">Kedro architecture overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/02_architecture_overview.html#kedro-project">Kedro project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/02_architecture_overview.html#kedro-starter">Kedro starter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/02_architecture_overview.html#kedro-library">Kedro library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/02_architecture_overview.html#kedro-framework">Kedro framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/02_architecture_overview.html#kedro-extension">Kedro extension</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../12_faq/03_kedro_principles.html">Kedro Principles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/03_kedro_principles.html#modularity-at-the-core">1. Modularity at the core ️📦</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/03_kedro_principles.html#grow-beginners-into-experts">2. Grow beginners into experts 🌱</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/03_kedro_principles.html#user-empathy-without-unfounded-assumptions">3. User empathy without unfounded assumptions 🤝</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/03_kedro_principles.html#simplicity-means-bare-necessities">4. Simplicity means bare necessities 🍞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/03_kedro_principles.html#there-should-be-one-obvious-way-of-doing-things">5. There should be one obvious way of doing things 🎯</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/03_kedro_principles.html#a-sprinkle-of-magic-is-better-than-a-spoonful-of-it">6. A sprinkle of magic is better than a spoonful of it ✨</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../12_faq/03_kedro_principles.html#lean-process-and-lean-product">7. Lean process and lean product 👟</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../13_resources/01_logos.html">Images and icons</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/01_logos.html#white-background">White background</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../13_resources/01_logos.html#icon">Icon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../13_resources/01_logos.html#icon-with-text">Icon with text</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/01_logos.html#black-background">Black background</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../13_resources/01_logos.html#id1">Icon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../13_resources/01_logos.html#id2">Icon with text</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../13_resources/02_glossary.html">Kedro glossary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#data-catalog">Data Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#data-engineering-vs-data-science">Data engineering vs Data science</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#kedro">Kedro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#kedrocontext"><code class="docutils literal notranslate"><span class="pre">KedroContext</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#kedrosession"><code class="docutils literal notranslate"><span class="pre">KedroSession</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#kedro-viz">Kedro-Viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#layers-data-engineering-convention">Layers (data engineering convention)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#modular-pipeline">Modular pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#node">Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#node-execution-order">Node execution order</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#pipeline">Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#pipeline-slicing">Pipeline slicing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#runner">Runner</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#starters">Starters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#tags">Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../13_resources/02_glossary.html#workflow-dependencies">Workflow dependencies</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Contribute to Kedro</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../14_contribution/01_contribute_to_kedro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../14_contribution/02_developer_contributor_guidelines.html">Guidelines for contributing developers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../14_contribution/02_developer_contributor_guidelines.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../14_contribution/02_developer_contributor_guidelines.html#before-you-start-development-set-up">Before you start: development set up</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../14_contribution/02_developer_contributor_guidelines.html#get-started-areas-of-contribution">Get started: areas of contribution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/02_developer_contributor_guidelines.html#core-contribution-process"><code class="docutils literal notranslate"><span class="pre">core</span></code> contribution process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/02_developer_contributor_guidelines.html#extras-contribution-process"><code class="docutils literal notranslate"><span class="pre">extras</span></code> contribution process</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../14_contribution/02_developer_contributor_guidelines.html#create-a-pull-request">Create a pull request</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/02_developer_contributor_guidelines.html#pep-8-standards-pylint-and-flake8">PEP-8 Standards (<code class="docutils literal notranslate"><span class="pre">pylint</span></code> and <code class="docutils literal notranslate"><span class="pre">flake8</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/02_developer_contributor_guidelines.html#unit-tests-100-coverage-pytest-pytest-cov">Unit tests, 100% coverage (<code class="docutils literal notranslate"><span class="pre">pytest</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest-cov</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/02_developer_contributor_guidelines.html#e2e-tests-behave">E2E tests (<code class="docutils literal notranslate"><span class="pre">behave</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/02_developer_contributor_guidelines.html#others">Others</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/02_developer_contributor_guidelines.html#hints-on-pre-commit-usage">Hints on pre-commit usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../14_contribution/02_developer_contributor_guidelines.html#need-help">Need help?</a><ul>
<li class="toctree-l3"><a class="reference external" href="https://www.firsttimersonly.com/">First timers only</a></li>
<li class="toctree-l3"><a class="reference external" href="https://egghead.io/courses/how-to-contribute-to-an-open-source-project-on-github">How to contribute to an open source project on GitHub</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../14_contribution/03_backwards_compatibility.html">Backwards compatibility &amp; breaking changes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../14_contribution/03_backwards_compatibility.html#when-should-i-make-a-breaking-change">When should I make a breaking change?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../14_contribution/03_backwards_compatibility.html#the-kedro-release-model">The Kedro release model</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html">Contribute to the Kedro documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#how-do-i-rebuild-the-documentation-after-i-make-changes-to-it">How do I rebuild the documentation after I make changes to it?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#set-up-to-build-kedro-documentation">Set up to build Kedro documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#build-the-documentation">Build the documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#extend-kedro-documentation">Extend Kedro documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#add-new-pages">Add new pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#move-or-remove-pages">Move or remove pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#create-a-pull-request">Create a pull request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#help">Help!</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#kedro-documentation-style-guide">Kedro documentation style guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#language">Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#formatting">Formatting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#links">Links</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#capitalisation">Capitalisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#bullets">Bullets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#notes">Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#kedro-lexicon">Kedro lexicon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../14_contribution/04_documentation_contributor_guidelines.html#style">Style</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../kedro.html">kedro</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../kedro.config.html">kedro.config</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.config.ConfigLoader.html">kedro.config.ConfigLoader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.config.TemplatedConfigLoader.html">kedro.config.TemplatedConfigLoader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.config.MissingConfigException.html">kedro.config.MissingConfigException</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kedro.extras.html">kedro.extras</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.extras.datasets.html">kedro.extras.datasets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.api.APIDataSet.html">kedro.extras.datasets.api.APIDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.biosequence.BioSequenceDataSet.html">kedro.extras.datasets.biosequence.BioSequenceDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.dask.ParquetDataSet.html">kedro.extras.datasets.dask.ParquetDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.email.EmailMessageDataSet.html">kedro.extras.datasets.email.EmailMessageDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.geopandas.GeoJSONDataSet.html">kedro.extras.datasets.geopandas.GeoJSONDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.holoviews.HoloviewsWriter.html">kedro.extras.datasets.holoviews.HoloviewsWriter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.json.JSONDataSet.html">kedro.extras.datasets.json.JSONDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.matplotlib.MatplotlibWriter.html">kedro.extras.datasets.matplotlib.MatplotlibWriter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.networkx.NetworkXDataSet.html">kedro.extras.datasets.networkx.NetworkXDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pandas.CSVDataSet.html">kedro.extras.datasets.pandas.CSVDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pandas.ExcelDataSet.html">kedro.extras.datasets.pandas.ExcelDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pandas.AppendableExcelDataSet.html">kedro.extras.datasets.pandas.AppendableExcelDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pandas.FeatherDataSet.html">kedro.extras.datasets.pandas.FeatherDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pandas.GBQQueryDataSet.html">kedro.extras.datasets.pandas.GBQQueryDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pandas.GBQTableDataSet.html">kedro.extras.datasets.pandas.GBQTableDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pandas.GenericDataSet.html">kedro.extras.datasets.pandas.GenericDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pandas.HDFDataSet.html">kedro.extras.datasets.pandas.HDFDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pandas.JSONDataSet.html">kedro.extras.datasets.pandas.JSONDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pandas.ParquetDataSet.html">kedro.extras.datasets.pandas.ParquetDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pandas.SQLQueryDataSet.html">kedro.extras.datasets.pandas.SQLQueryDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pandas.SQLTableDataSet.html">kedro.extras.datasets.pandas.SQLTableDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pickle.PickleDataSet.html">kedro.extras.datasets.pickle.PickleDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.pillow.ImageDataSet.html">kedro.extras.datasets.pillow.ImageDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.plotly.JSONDataSet.html">kedro.extras.datasets.plotly.JSONDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.plotly.PlotlyDataSet.html">kedro.extras.datasets.plotly.PlotlyDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.spark.DeltaTableDataSet.html">kedro.extras.datasets.spark.DeltaTableDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.spark.SparkDataSet.html">kedro.extras.datasets.spark.SparkDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.spark.SparkHiveDataSet.html">kedro.extras.datasets.spark.SparkHiveDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.spark.SparkJDBCDataSet.html">kedro.extras.datasets.spark.SparkJDBCDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.tensorflow.TensorFlowModelDataset.html">kedro.extras.datasets.tensorflow.TensorFlowModelDataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.text.TextDataSet.html">kedro.extras.datasets.text.TextDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.tracking.JSONDataSet.html">kedro.extras.datasets.tracking.JSONDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.tracking.MetricsDataSet.html">kedro.extras.datasets.tracking.MetricsDataSet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.datasets.yaml.YAMLDataSet.html">kedro.extras.datasets.yaml.YAMLDataSet</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.extras.decorators.html">kedro.extras.decorators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.decorators.memory_profiler.html">kedro.extras.decorators.memory_profiler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.decorators.retry_node.html">kedro.extras.decorators.retry_node</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.extras.extensions.html">kedro.extras.extensions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.extensions.ipython.html">kedro.extras.extensions.ipython</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.extras.logging.html">kedro.extras.logging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.logging.color_logger.html">kedro.extras.logging.color_logger</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.extras.transformers.html">kedro.extras.transformers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.transformers.memory_profiler.html">kedro.extras.transformers.memory_profiler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.extras.transformers.time_profiler.html">kedro.extras.transformers.time_profiler</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kedro.framework.html">kedro.framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.framework.cli.html">kedro.framework.cli</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.cli.catalog.html">kedro.framework.cli.catalog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.cli.cli.html">kedro.framework.cli.cli</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.cli.hooks.html">kedro.framework.cli.hooks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.cli.jupyter.html">kedro.framework.cli.jupyter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.cli.pipeline.html">kedro.framework.cli.pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.cli.project.html">kedro.framework.cli.project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.cli.registry.html">kedro.framework.cli.registry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.cli.starters.html">kedro.framework.cli.starters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.cli.utils.html">kedro.framework.cli.utils</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.framework.context.html">kedro.framework.context</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.context.KedroContext.html">kedro.framework.context.KedroContext</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.context.KedroContextError.html">kedro.framework.context.KedroContextError</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.framework.hooks.html">kedro.framework.hooks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.hooks.manager.html">kedro.framework.hooks.manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.hooks.markers.html">kedro.framework.hooks.markers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.hooks.specs.html">kedro.framework.hooks.specs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.framework.project.html">kedro.framework.project</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.project.configure_project.html">kedro.framework.project.configure_project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.project.validate_settings.html">kedro.framework.project.validate_settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.framework.session.html">kedro.framework.session</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.session.session.html">kedro.framework.session.session</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.session.store.html">kedro.framework.session.store</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.framework.startup.html">kedro.framework.startup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.startup.bootstrap_project.html">kedro.framework.startup.bootstrap_project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.framework.startup.ProjectMetadata.html">kedro.framework.startup.ProjectMetadata</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kedro.io.html">kedro.io</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.AbstractDataSet.html">kedro.io.AbstractDataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.AbstractVersionedDataSet.html">kedro.io.AbstractVersionedDataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.AbstractTransformer.html">kedro.io.AbstractTransformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.DataCatalog.html">kedro.io.DataCatalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.LambdaDataSet.html">kedro.io.LambdaDataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.MemoryDataSet.html">kedro.io.MemoryDataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.PartitionedDataSet.html">kedro.io.PartitionedDataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.IncrementalDataSet.html">kedro.io.IncrementalDataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.CachedDataSet.html">kedro.io.CachedDataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.DataCatalogWithDefault.html">kedro.io.DataCatalogWithDefault</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.Version.html">kedro.io.Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.DataSetAlreadyExistsError.html">kedro.io.DataSetAlreadyExistsError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.DataSetError.html">kedro.io.DataSetError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.io.DataSetNotFoundError.html">kedro.io.DataSetNotFoundError</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kedro.pipeline.html">kedro.pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.pipeline.node.html">kedro.pipeline.node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.pipeline.modular_pipeline.pipeline.html">kedro.pipeline.modular_pipeline.pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.pipeline.Pipeline.html">kedro.pipeline.Pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.pipeline.node.Node.html">kedro.pipeline.node.Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.pipeline.decorators.html">kedro.pipeline.decorators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.pipeline.decorators.log_time.html">kedro.pipeline.decorators.log_time</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.pipeline.modular_pipeline.ModularPipelineError.html">kedro.pipeline.modular_pipeline.ModularPipelineError</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kedro.runner.html">kedro.runner</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.runner.run_node.html">kedro.runner.run_node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.runner.AbstractRunner.html">kedro.runner.AbstractRunner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.runner.ParallelRunner.html">kedro.runner.ParallelRunner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.runner.SequentialRunner.html">kedro.runner.SequentialRunner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.runner.ThreadRunner.html">kedro.runner.ThreadRunner</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kedro.utils.html">kedro.utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.utils.load_obj.html">kedro.utils.load_obj</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kedro.versioning.html">kedro.versioning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../kedro.versioning.journal.html">kedro.versioning.journal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.versioning.journal.Journal.html">kedro.versioning.journal.Journal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../kedro.versioning.journal.JournalFileHandler.html">kedro.versioning.journal.JournalFileHandler</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Kedro</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          








    



    
















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>kedro.framework.cli.pipeline</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for kedro.framework.cli.pipeline</h1><div class="highlight"><pre>
<span></span><span class="c1"># pylint: disable=too-many-lines</span>

<span class="sd">&quot;&quot;&quot;A collection of CLI commands for working with Kedro pipelines.&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">from</span> <span class="nn">importlib</span> <span class="kn">import</span> <span class="n">import_module</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">textwrap</span> <span class="kn">import</span> <span class="n">indent</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">NamedTuple</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>
<span class="kn">from</span> <span class="nn">zipfile</span> <span class="kn">import</span> <span class="n">ZipFile</span>

<span class="kn">import</span> <span class="nn">click</span>
<span class="kn">import</span> <span class="nn">pkg_resources</span>
<span class="kn">import</span> <span class="nn">yaml</span>
<span class="kn">from</span> <span class="nn">rope.base.project</span> <span class="kn">import</span> <span class="n">Project</span>
<span class="kn">from</span> <span class="nn">rope.contrib</span> <span class="kn">import</span> <span class="n">generate</span>
<span class="kn">from</span> <span class="nn">rope.refactor.move</span> <span class="kn">import</span> <span class="n">MoveModule</span>
<span class="kn">from</span> <span class="nn">rope.refactor.rename</span> <span class="kn">import</span> <span class="n">Rename</span>
<span class="kn">from</span> <span class="nn">setuptools.dist</span> <span class="kn">import</span> <span class="n">Distribution</span>

<span class="kn">import</span> <span class="nn">kedro</span>
<span class="kn">from</span> <span class="nn">kedro.framework.cli.utils</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">KedroCliError</span><span class="p">,</span>
    <span class="n">_clean_pycache</span><span class="p">,</span>
    <span class="n">_filter_deprecation_warnings</span><span class="p">,</span>
    <span class="n">_get_requirements_in</span><span class="p">,</span>
    <span class="n">call</span><span class="p">,</span>
    <span class="n">command_with_verbosity</span><span class="p">,</span>
    <span class="n">env_option</span><span class="p">,</span>
    <span class="n">python_call</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">kedro.framework.project</span> <span class="kn">import</span> <span class="n">pipelines</span><span class="p">,</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">kedro.framework.startup</span> <span class="kn">import</span> <span class="n">ProjectMetadata</span>

<span class="n">_SETUP_PY_TEMPLATE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;# -*- coding: utf-8 -*-</span>
<span class="s2">from setuptools import setup, find_packages</span>

<span class="s2">setup(</span>
<span class="s2">    name=&quot;</span><span class="si">{name}</span><span class="s2">&quot;,</span>
<span class="s2">    version=&quot;</span><span class="si">{version}</span><span class="s2">&quot;,</span>
<span class="s2">    description=&quot;Modular pipeline `</span><span class="si">{name}</span><span class="s2">`&quot;,</span>
<span class="s2">    packages=find_packages(),</span>
<span class="s2">    include_package_data=True,</span>
<span class="s2">    package_data=</span><span class="si">{package_data}</span><span class="s2">,</span>
<span class="s2">    install_requires=</span><span class="si">{install_requires}</span><span class="s2">,</span>
<span class="s2">)</span>
<span class="s2">&quot;&quot;&quot;</span>


<div class="viewcode-block" id="PipelineArtifacts"><a class="viewcode-back" href="../../../../kedro.framework.cli.pipeline.PipelineArtifacts.html#kedro.framework.cli.pipeline.PipelineArtifacts">[docs]</a><span class="k">class</span> <span class="nc">PipelineArtifacts</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An ordered collection of source_path, tests_path, config_paths&quot;&quot;&quot;</span>

    <span class="n">pipeline_dir</span><span class="p">:</span> <span class="n">Path</span>
    <span class="n">pipeline_tests</span><span class="p">:</span> <span class="n">Path</span>
    <span class="n">pipeline_conf</span><span class="p">:</span> <span class="n">Path</span></div>


<span class="k">def</span> <span class="nf">_assert_pkg_name_ok</span><span class="p">(</span><span class="n">pkg_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check that python package name is in line with PEP8 requirements.</span>

<span class="sd">    Args:</span>
<span class="sd">        pkg_name: Candidate Python package name.</span>

<span class="sd">    Raises:</span>
<span class="sd">        KedroCliError: If package name violates the requirements.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">base_message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">pkg_name</span><span class="si">}</span><span class="s2">` is not a valid Python package name.&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[a-zA-Z_]&quot;</span><span class="p">,</span> <span class="n">pkg_name</span><span class="p">):</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">base_message</span> <span class="o">+</span> <span class="s2">&quot; It must start with a letter or underscore.&quot;</span>
        <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pkg_name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">base_message</span> <span class="o">+</span> <span class="s2">&quot; It must be at least 2 characters long.&quot;</span>
        <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^\w+$&quot;</span><span class="p">,</span> <span class="n">pkg_name</span><span class="p">[</span><span class="mi">1</span><span class="p">:]):</span>
        <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">base_message</span> <span class="o">+</span> <span class="s2">&quot; It must contain only letters, digits, and/or underscores.&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_check_pipeline_name</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>  <span class="c1"># pylint: disable=unused-argument</span>
    <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
        <span class="n">_assert_pkg_name_ok</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>


<span class="k">def</span> <span class="nf">_check_module_path</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>  <span class="c1"># pylint: disable=unused-argument</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[\w.]+$&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;The pipeline location you provided is not a valid Python module path&quot;</span>
        <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>


<span class="c1"># pylint: disable=missing-function-docstring</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Kedro&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pipeline_cli</span><span class="p">():</span>  <span class="c1"># pragma: no cover</span>
    <span class="k">pass</span>


<span class="nd">@pipeline_cli</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">pipeline</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Commands for working with pipelines.&quot;&quot;&quot;</span>


<span class="nd">@command_with_verbosity</span><span class="p">(</span><span class="n">pipeline</span><span class="p">,</span> <span class="s2">&quot;create&quot;</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">argument</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">_check_pipeline_name</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span>
    <span class="s2">&quot;--skip-config&quot;</span><span class="p">,</span>
    <span class="n">is_flag</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Skip creation of config files for the new pipeline(s).&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@env_option</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Environment to create pipeline configuration in. Defaults to `base`.&quot;</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">pass_obj</span>  <span class="c1"># this will pass the metadata as first argument</span>
<span class="k">def</span> <span class="nf">create_pipeline</span><span class="p">(</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">skip_config</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>  <span class="c1"># pylint: disable=unused-argument</span>
    <span class="sd">&quot;&quot;&quot;Create a new modular pipeline by providing a name.&quot;&quot;&quot;</span>
    <span class="n">package_dir</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">source_dir</span> <span class="o">/</span> <span class="n">metadata</span><span class="o">.</span><span class="n">package_name</span>
    <span class="n">conf_root</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">CONF_ROOT</span>
    <span class="n">project_conf_path</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">project_path</span> <span class="o">/</span> <span class="n">conf_root</span>

    <span class="n">env</span> <span class="o">=</span> <span class="n">env</span> <span class="ow">or</span> <span class="s2">&quot;base&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_config</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">project_conf_path</span> <span class="o">/</span> <span class="n">env</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to locate environment `</span><span class="si">{</span><span class="n">env</span><span class="si">}</span><span class="s2">`. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Make sure it exists in the project configuration.&quot;</span>
        <span class="p">)</span>

    <span class="n">result_path</span> <span class="o">=</span> <span class="n">_create_pipeline</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">package_dir</span> <span class="o">/</span> <span class="s2">&quot;pipelines&quot;</span><span class="p">)</span>
    <span class="n">_copy_pipeline_tests</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">result_path</span><span class="p">,</span> <span class="n">package_dir</span><span class="p">)</span>
    <span class="n">_copy_pipeline_configs</span><span class="p">(</span><span class="n">result_path</span><span class="p">,</span> <span class="n">project_conf_path</span><span class="p">,</span> <span class="n">skip_config</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Pipeline `</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">` was successfully created.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>

    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;To be able to run the pipeline `</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">`, you will need to add it &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;to `register_pipelines()` in `</span><span class="si">{</span><span class="n">package_dir</span> <span class="o">/</span> <span class="s1">&#39;pipeline_registry.py&#39;</span><span class="si">}</span><span class="s2">`.&quot;</span><span class="p">,</span>
        <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">,</span>
    <span class="p">)</span>


<span class="nd">@command_with_verbosity</span><span class="p">(</span><span class="n">pipeline</span><span class="p">,</span> <span class="s2">&quot;delete&quot;</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">argument</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">_check_pipeline_name</span><span class="p">)</span>
<span class="nd">@env_option</span><span class="p">(</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Environment to delete pipeline configuration from. Defaults to `base`.&quot;</span>
<span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span>
    <span class="s2">&quot;-y&quot;</span><span class="p">,</span> <span class="s2">&quot;--yes&quot;</span><span class="p">,</span> <span class="n">is_flag</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Confirm deletion of pipeline non-interactively.&quot;</span>
<span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">pass_obj</span>  <span class="c1"># this will pass the metadata as first argument</span>
<span class="k">def</span> <span class="nf">delete_pipeline</span><span class="p">(</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">yes</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>  <span class="c1"># pylint: disable=unused-argument</span>
    <span class="sd">&quot;&quot;&quot;Delete a modular pipeline by providing a name.&quot;&quot;&quot;</span>
    <span class="n">package_dir</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">source_dir</span> <span class="o">/</span> <span class="n">metadata</span><span class="o">.</span><span class="n">package_name</span>
    <span class="n">conf_root</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">CONF_ROOT</span>
    <span class="n">project_conf_path</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">project_path</span> <span class="o">/</span> <span class="n">conf_root</span>

    <span class="n">env</span> <span class="o">=</span> <span class="n">env</span> <span class="ow">or</span> <span class="s2">&quot;base&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">project_conf_path</span> <span class="o">/</span> <span class="n">env</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to locate environment `</span><span class="si">{</span><span class="n">env</span><span class="si">}</span><span class="s2">`. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Make sure it exists in the project configuration.&quot;</span>
        <span class="p">)</span>

    <span class="n">pipeline_artifacts</span> <span class="o">=</span> <span class="n">_get_pipeline_artifacts</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span>

    <span class="n">files_to_delete</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">pipeline_artifacts</span><span class="o">.</span><span class="n">pipeline_conf</span> <span class="o">/</span> <span class="n">confdir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.yml&quot;</span>
        <span class="k">for</span> <span class="n">confdir</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;parameters&quot;</span><span class="p">,</span> <span class="s2">&quot;catalog&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">pipeline_artifacts</span><span class="o">.</span><span class="n">pipeline_conf</span> <span class="o">/</span> <span class="n">confdir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.yml&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span>
    <span class="p">]</span>
    <span class="n">dirs_to_delete</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">path</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="p">(</span><span class="n">pipeline_artifacts</span><span class="o">.</span><span class="n">pipeline_dir</span><span class="p">,</span> <span class="n">pipeline_artifacts</span><span class="o">.</span><span class="n">pipeline_tests</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">files_to_delete</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">dirs_to_delete</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline `</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">` not found.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">yes</span><span class="p">:</span>
        <span class="n">_echo_deletion_warning</span><span class="p">(</span>
            <span class="s2">&quot;The following paths will be removed:&quot;</span><span class="p">,</span>
            <span class="n">directories</span><span class="o">=</span><span class="n">dirs_to_delete</span><span class="p">,</span>
            <span class="n">files</span><span class="o">=</span><span class="n">files_to_delete</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">()</span>
        <span class="n">yes</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Are you sure you want to delete pipeline `</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">`?&quot;</span><span class="p">)</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">yes</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span><span class="s2">&quot;Deletion aborted!&quot;</span><span class="p">)</span>

    <span class="n">_delete_artifacts</span><span class="p">(</span><span class="o">*</span><span class="n">files_to_delete</span><span class="p">,</span> <span class="o">*</span><span class="n">dirs_to_delete</span><span class="p">)</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Pipeline `</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">` was successfully deleted.&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">If you added the pipeline `</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">` to `register_pipelines()` in &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">package_dir</span> <span class="o">/</span> <span class="s1">&#39;pipeline_registry.py&#39;</span><span class="si">}</span><span class="s2">`, you will need to remove it.&quot;</span><span class="p">,</span>
        <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">,</span>
    <span class="p">)</span>


<span class="nd">@pipeline</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;list&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">list_pipelines</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;List all pipelines defined in your pipeline_registry.py file. (DEPRECATED)&quot;&quot;&quot;</span>
    <span class="n">deprecation_message</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;DeprecationWarning: Command `kedro pipeline list` is deprecated. &quot;</span>
        <span class="s2">&quot;Please use `kedro registry list` instead.&quot;</span>
    <span class="p">)</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">deprecation_message</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>

    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">pipelines</span><span class="p">)))</span>


<span class="nd">@command_with_verbosity</span><span class="p">(</span><span class="n">pipeline</span><span class="p">,</span> <span class="s2">&quot;describe&quot;</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">argument</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;__default__&quot;</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">pass_obj</span>
<span class="k">def</span> <span class="nf">describe_pipeline</span><span class="p">(</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>  <span class="c1"># pylint: disable=unused-argument, protected-access</span>
    <span class="sd">&quot;&quot;&quot;Describe a pipeline by providing a pipeline name.</span>
<span class="sd">    Defaults to the __default__ pipeline. (DEPRECATED)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deprecation_message</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;DeprecationWarning: Command `kedro pipeline describe` is deprecated. &quot;</span>
        <span class="s2">&quot;Please use `kedro registry describe` instead.&quot;</span>
    <span class="p">)</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">deprecation_message</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>

    <span class="n">pipeline_obj</span> <span class="o">=</span> <span class="n">pipelines</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline_obj</span><span class="p">:</span>
        <span class="n">all_pipeline_names</span> <span class="o">=</span> <span class="n">pipelines</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">existing_pipelines</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">all_pipeline_names</span><span class="p">))</span>
        <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">` pipeline not found. Existing pipelines: [</span><span class="si">{</span><span class="n">existing_pipelines</span><span class="si">}</span><span class="s2">]&quot;</span>
        <span class="p">)</span>

    <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">pipeline_obj</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">namespace</span><span class="si">}</span><span class="s2">.&quot;</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">namespace</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">namespace</span><span class="si">}{</span><span class="n">node</span><span class="o">.</span><span class="n">_name</span> <span class="ow">or</span> <span class="n">node</span><span class="o">.</span><span class="n">_func_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">_func_name</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Nodes&quot;</span><span class="p">:</span> <span class="n">nodes</span><span class="p">}</span>

    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>


<span class="nd">@command_with_verbosity</span><span class="p">(</span><span class="n">pipeline</span><span class="p">,</span> <span class="s2">&quot;pull&quot;</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">argument</span><span class="p">(</span><span class="s2">&quot;package_path&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span>
    <span class="s2">&quot;--all&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-a&quot;</span><span class="p">,</span>
    <span class="s2">&quot;all_flag&quot;</span><span class="p">,</span>
    <span class="n">is_flag</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Pull and unpack all pipelines in the `pyproject.toml` package manifest section.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@env_option</span><span class="p">(</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Environment to install the pipeline configuration to. Defaults to `base`.&quot;</span>
<span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span>
    <span class="s2">&quot;--alias&quot;</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
    <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">callback</span><span class="o">=</span><span class="n">_check_pipeline_name</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Alternative name to unpackage under.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span>
    <span class="s2">&quot;--fs-args&quot;</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span>
        <span class="n">exists</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">file_okay</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dir_okay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">readable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">resolve_path</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">),</span>
    <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Location of a configuration file for the fsspec filesystem used to pull the package.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">pass_obj</span>  <span class="c1"># this will pass the metadata as first argument</span>
<span class="k">def</span> <span class="nf">pull_package</span><span class="p">(</span>  <span class="c1"># pylint:disable=unused-argument, too-many-arguments</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">,</span> <span class="n">package_path</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">alias</span><span class="p">,</span> <span class="n">fs_args</span><span class="p">,</span> <span class="n">all_flag</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pull and unpack a modular pipeline in your project.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">package_path</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">all_flag</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="s2">&quot;Please specify a package path or add &#39;--all&#39; to pull all pipelines in the &quot;</span>
            <span class="s2">&quot;`pyproject.toml` package manifest section.&quot;</span>
        <span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">all_flag</span><span class="p">:</span>
        <span class="n">_pull_packages_from_manifest</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">_pull_package</span><span class="p">(</span><span class="n">package_path</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="n">alias</span><span class="p">,</span> <span class="n">fs_args</span><span class="o">=</span><span class="n">fs_args</span><span class="p">)</span>
    <span class="n">as_alias</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; as `</span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2">`&quot;</span> <span class="k">if</span> <span class="n">alias</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Pipeline </span><span class="si">{</span><span class="n">package_path</span><span class="si">}</span><span class="s2"> pulled and unpacked</span><span class="si">{</span><span class="n">as_alias</span><span class="si">}</span><span class="s2">!&quot;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_pull_package</span><span class="p">(</span>
    <span class="n">package_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">,</span>
    <span class="n">env</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fs_args</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">temp_dir</span><span class="p">:</span>
        <span class="n">temp_dir_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>

        <span class="n">_unpack_wheel</span><span class="p">(</span><span class="n">package_path</span><span class="p">,</span> <span class="n">temp_dir_path</span><span class="p">,</span> <span class="n">fs_args</span><span class="p">)</span>

        <span class="n">dist_info_file</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">temp_dir_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.dist-info&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dist_info_file</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;More than 1 or no dist-info files found from </span><span class="si">{</span><span class="n">package_path</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;There has to be exactly one dist-info directory.&quot;</span>
            <span class="p">)</span>
        <span class="c1"># Extract package name, based on the naming convention for wheel files</span>
        <span class="c1"># https://www.python.org/dev/peps/pep-0427/#file-name-convention</span>
        <span class="n">package_name</span> <span class="o">=</span> <span class="n">dist_info_file</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stem</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">package_metadata</span> <span class="o">=</span> <span class="n">dist_info_file</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="s2">&quot;METADATA&quot;</span>

        <span class="n">req_pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;Requires-Dist: (.*?)\n&quot;</span>
        <span class="n">package_reqs</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">req_pattern</span><span class="p">,</span> <span class="n">package_metadata</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">package_reqs</span><span class="p">:</span>
            <span class="n">requirements_in</span> <span class="o">=</span> <span class="n">_get_requirements_in</span><span class="p">(</span>
                <span class="n">metadata</span><span class="o">.</span><span class="n">source_dir</span><span class="p">,</span> <span class="n">create_empty</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
            <span class="n">_append_package_reqs</span><span class="p">(</span><span class="n">requirements_in</span><span class="p">,</span> <span class="n">package_reqs</span><span class="p">,</span> <span class="n">package_name</span><span class="p">)</span>

        <span class="n">_clean_pycache</span><span class="p">(</span><span class="n">temp_dir_path</span><span class="p">)</span>
        <span class="n">_install_files</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="n">temp_dir_path</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">alias</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_pull_packages_from_manifest</span><span class="p">(</span><span class="n">metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># pylint: disable=import-outside-toplevel</span>
    <span class="kn">import</span> <span class="nn">anyconfig</span>  <span class="c1"># for performance reasons</span>

    <span class="n">config_dict</span> <span class="o">=</span> <span class="n">anyconfig</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">config_file</span><span class="p">)</span>
    <span class="n">config_dict</span> <span class="o">=</span> <span class="n">config_dict</span><span class="p">[</span><span class="s2">&quot;tool&quot;</span><span class="p">][</span><span class="s2">&quot;kedro&quot;</span><span class="p">]</span>
    <span class="n">build_specs</span> <span class="o">=</span> <span class="n">config_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pipeline&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pull&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">build_specs</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="s2">&quot;Nothing to pull. Please update the `pyproject.toml` package manifest section.&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">for</span> <span class="n">package_path</span><span class="p">,</span> <span class="n">specs</span> <span class="ow">in</span> <span class="n">build_specs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="s2">&quot;alias&quot;</span> <span class="ow">in</span> <span class="n">specs</span><span class="p">:</span>
            <span class="n">_assert_pkg_name_ok</span><span class="p">(</span><span class="n">specs</span><span class="p">[</span><span class="s2">&quot;alias&quot;</span><span class="p">])</span>
        <span class="n">_pull_package</span><span class="p">(</span><span class="n">package_path</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="o">**</span><span class="n">specs</span><span class="p">)</span>
        <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pulled and unpacked `</span><span class="si">{</span><span class="n">package_path</span><span class="si">}</span><span class="s2">`!&quot;</span><span class="p">)</span>

    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;Pipelines pulled and unpacked!&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_package_pipelines_from_manifest</span><span class="p">(</span><span class="n">metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># pylint: disable=import-outside-toplevel</span>
    <span class="kn">import</span> <span class="nn">anyconfig</span>  <span class="c1"># for performance reasons</span>

    <span class="n">config_dict</span> <span class="o">=</span> <span class="n">anyconfig</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">config_file</span><span class="p">)</span>
    <span class="n">config_dict</span> <span class="o">=</span> <span class="n">config_dict</span><span class="p">[</span><span class="s2">&quot;tool&quot;</span><span class="p">][</span><span class="s2">&quot;kedro&quot;</span><span class="p">]</span>
    <span class="n">build_specs</span> <span class="o">=</span> <span class="n">config_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pipeline&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;package&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">build_specs</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="s2">&quot;Nothing to package. Please update the `pyproject.toml` package manifest section.&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">for</span> <span class="n">pipeline_name</span><span class="p">,</span> <span class="n">specs</span> <span class="ow">in</span> <span class="n">build_specs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="s2">&quot;alias&quot;</span> <span class="ow">in</span> <span class="n">specs</span><span class="p">:</span>
            <span class="n">_assert_pkg_name_ok</span><span class="p">(</span><span class="n">specs</span><span class="p">[</span><span class="s2">&quot;alias&quot;</span><span class="p">])</span>
        <span class="n">_package_pipeline</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="o">**</span><span class="n">specs</span><span class="p">)</span>
        <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Packaged `</span><span class="si">{</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">` pipeline!&quot;</span><span class="p">)</span>

    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;Pipelines packaged!&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>


<span class="nd">@pipeline</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;package&quot;</span><span class="p">)</span>
<span class="nd">@env_option</span><span class="p">(</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Environment where the pipeline configuration lives. Defaults to `base`.&quot;</span>
<span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span>
    <span class="s2">&quot;--alias&quot;</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
    <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">callback</span><span class="o">=</span><span class="n">_check_pipeline_name</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Alternative name to package under.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span>
    <span class="s2">&quot;-d&quot;</span><span class="p">,</span>
    <span class="s2">&quot;--destination&quot;</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">resolve_path</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">file_okay</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Location where to create the wheel file. Defaults to `src/dist`.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span>
    <span class="s2">&quot;-v&quot;</span><span class="p">,</span>
    <span class="s2">&quot;--version&quot;</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Version to package under. &quot;</span>
    <span class="s2">&quot;Defaults to pipeline package version or, &quot;</span>
    <span class="s2">&quot;if that is not defined, the project package version.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span>
    <span class="s2">&quot;--all&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-a&quot;</span><span class="p">,</span>
    <span class="s2">&quot;all_flag&quot;</span><span class="p">,</span>
    <span class="n">is_flag</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Package all pipelines in the `pyproject.toml` package manifest section.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">argument</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">_check_module_path</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">pass_obj</span>  <span class="c1"># this will pass the metadata as first argument</span>
<span class="k">def</span> <span class="nf">package_pipeline</span><span class="p">(</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">alias</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">all_flag</span>
<span class="p">):</span>  <span class="c1"># pylint: disable=too-many-arguments</span>
    <span class="sd">&quot;&quot;&quot;Package up a modular pipeline as a Python .whl.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">all_flag</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
            <span class="s2">&quot;Please specify a pipeline name or add &#39;--all&#39; to package all pipelines in &quot;</span>
            <span class="s2">&quot;the `pyproject.toml` package manifest section.&quot;</span>
        <span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">all_flag</span><span class="p">:</span>
        <span class="n">_package_pipelines_from_manifest</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">result_path</span> <span class="o">=</span> <span class="n">_package_pipeline</span><span class="p">(</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="n">alias</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="n">destination</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span>
    <span class="p">)</span>

    <span class="n">as_alias</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; as `</span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2">`&quot;</span> <span class="k">if</span> <span class="n">alias</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Pipeline `</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">` packaged</span><span class="si">{</span><span class="n">as_alias</span><span class="si">}</span><span class="s2">! Location: </span><span class="si">{</span><span class="n">result_path</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_echo_deletion_warning</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">paths</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Path</span><span class="p">]):</span>
    <span class="n">paths</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">values</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">paths</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">values</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">paths</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">paths</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">key</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
        <span class="n">paths_str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">)</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">indent</span><span class="p">(</span><span class="n">paths_str</span><span class="p">,</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">_get_fsspec_filesystem</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">fs_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
    <span class="c1"># pylint: disable=import-outside-toplevel</span>
    <span class="kn">import</span> <span class="nn">anyconfig</span>
    <span class="kn">import</span> <span class="nn">fsspec</span>

    <span class="kn">from</span> <span class="nn">kedro.io.core</span> <span class="kn">import</span> <span class="n">get_protocol_and_path</span>

    <span class="n">protocol</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">get_protocol_and_path</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
    <span class="n">fs_args_config</span> <span class="o">=</span> <span class="n">anyconfig</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fs_args</span><span class="p">)</span> <span class="k">if</span> <span class="n">fs_args</span> <span class="k">else</span> <span class="p">{}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fsspec</span><span class="o">.</span><span class="n">filesystem</span><span class="p">(</span><span class="n">protocol</span><span class="p">,</span> <span class="o">**</span><span class="n">fs_args_config</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>  <span class="c1"># pylint: disable=broad-except</span>
        <span class="c1"># Specified protocol is not supported by `fsspec`</span>
        <span class="c1"># or requires extra dependencies</span>
        <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">),</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
        <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;Trying to use &#39;pip download&#39;...&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>


<span class="k">def</span> <span class="nf">_unpack_wheel</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">destination</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">fs_args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">filesystem</span> <span class="o">=</span> <span class="n">_get_fsspec_filesystem</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">fs_args</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">location</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.whl&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filesystem</span> <span class="ow">and</span> <span class="n">filesystem</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">location</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">filesystem</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">location</span><span class="p">)</span> <span class="k">as</span> <span class="n">fs_file</span><span class="p">:</span>
            <span class="c1"># pylint: disable=consider-using-with</span>
            <span class="n">ZipFile</span><span class="p">(</span><span class="n">fs_file</span><span class="p">)</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">python_call</span><span class="p">(</span>
            <span class="s2">&quot;pip&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;download&quot;</span><span class="p">,</span> <span class="s2">&quot;--no-deps&quot;</span><span class="p">,</span> <span class="s2">&quot;--dest&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">destination</span><span class="p">),</span> <span class="n">location</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">wheel_file</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">destination</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.whl&quot;</span><span class="p">))</span>
        <span class="c1"># `--no-deps` should fetch only one wheel file, and CLI should fail if that&#39;s</span>
        <span class="c1"># not the case.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">wheel_file</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">file_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">wf</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">wf</span> <span class="ow">in</span> <span class="n">wheel_file</span><span class="p">]</span>
            <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;More than 1 or no wheel files found: </span><span class="si">{</span><span class="n">file_names</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;There has to be exactly one distribution file.&quot;</span>
            <span class="p">)</span>
        <span class="c1"># pylint: disable=consider-using-with</span>
        <span class="n">ZipFile</span><span class="p">(</span><span class="n">wheel_file</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_rename_files</span><span class="p">(</span><span class="n">conf_source</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">old_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">config_files_to_rename</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">each</span>
        <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">conf_source</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">each</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span> <span class="ow">and</span> <span class="n">old_name</span> <span class="ow">in</span> <span class="n">each</span><span class="o">.</span><span class="n">name</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">config_file</span> <span class="ow">in</span> <span class="n">config_files_to_rename</span><span class="p">:</span>
        <span class="n">new_config_name</span> <span class="o">=</span> <span class="n">config_file</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">old_name</span><span class="p">,</span> <span class="n">new_name</span><span class="p">)</span>
        <span class="n">config_file</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">config_file</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="n">new_config_name</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_refactor_code_for_unpacking</span><span class="p">(</span>
    <span class="n">project</span><span class="p">:</span> <span class="n">Project</span><span class="p">,</span>
    <span class="n">package_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">tests_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">alias</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">project_metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">Path</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;This is the reverse operation of `_refactor_code_for_package`, i.e</span>
<span class="sd">    we go from:</span>
<span class="sd">    &lt;temp_dir&gt;  # also the root of the Rope project</span>
<span class="sd">    |__ &lt;pipeline_name&gt;  # or &lt;alias&gt;</span>
<span class="sd">        |__ __init__.py</span>
<span class="sd">    |__ tests  # only tests for &lt;pipeline_name&gt;</span>
<span class="sd">        |__ __init__.py</span>
<span class="sd">        |__ test_pipeline.py</span>

<span class="sd">    to:</span>
<span class="sd">    &lt;temp_dir&gt;  # also the root of the Rope project</span>
<span class="sd">    |__ &lt;package&gt;</span>
<span class="sd">        |__ __init__.py</span>
<span class="sd">        |__ pipelines</span>
<span class="sd">            |__ __init__.py</span>
<span class="sd">            |__ &lt;pipeline_name&gt;</span>
<span class="sd">                |__ __init__.py</span>
<span class="sd">    |__ tests</span>
<span class="sd">        |__ __init__.py</span>
<span class="sd">        |__ pipelines</span>
<span class="sd">            |__ __init__.py</span>
<span class="sd">            |__ &lt;pipeline_name&gt;</span>
<span class="sd">                |__ __init__.py</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_move_package_with_conflicting_name</span><span class="p">(</span>
        <span class="n">target</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">original_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">desired_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="n">_rename_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">original_name</span><span class="p">,</span> <span class="s2">&quot;tmp_name&quot;</span><span class="p">)</span>
        <span class="n">full_path</span> <span class="o">=</span> <span class="n">_create_nested_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
        <span class="n">_move_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="s2">&quot;tmp_name&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">.</span><span class="n">as_posix</span><span class="p">())</span>
        <span class="n">desired_name</span> <span class="o">=</span> <span class="n">desired_name</span> <span class="ow">or</span> <span class="n">original_name</span>
        <span class="n">_rename_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="p">(</span><span class="n">target</span> <span class="o">/</span> <span class="s2">&quot;tmp_name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span> <span class="n">desired_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">full_path</span>

    <span class="n">pipeline_name</span> <span class="o">=</span> <span class="n">package_path</span><span class="o">.</span><span class="n">stem</span>
    <span class="k">if</span> <span class="n">alias</span><span class="p">:</span>
        <span class="n">_rename_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">,</span> <span class="n">alias</span><span class="p">)</span>
        <span class="n">pipeline_name</span> <span class="o">=</span> <span class="n">alias</span>

    <span class="n">package_target</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">project_metadata</span><span class="o">.</span><span class="n">package_name</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;pipelines&quot;</span>
    <span class="k">if</span> <span class="n">pipeline_name</span> <span class="o">==</span> <span class="n">project_metadata</span><span class="o">.</span><span class="n">package_name</span><span class="p">:</span>
        <span class="n">full_path</span> <span class="o">=</span> <span class="n">_move_package_with_conflicting_name</span><span class="p">(</span><span class="n">package_target</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">full_path</span> <span class="o">=</span> <span class="n">_create_nested_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">package_target</span><span class="p">)</span>
        <span class="n">_move_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">,</span> <span class="n">package_target</span><span class="o">.</span><span class="n">as_posix</span><span class="p">())</span>
    <span class="n">refactored_package_path</span> <span class="o">=</span> <span class="n">full_path</span> <span class="o">/</span> <span class="n">pipeline_name</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">tests_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">refactored_package_path</span><span class="p">,</span> <span class="n">tests_path</span>

    <span class="c1"># we can&#39;t rename the tests package to &lt;pipeline_name&gt;</span>
    <span class="c1"># because it will conflict with existing top-level package;</span>
    <span class="c1"># hence we give it a temp name, create the expected</span>
    <span class="c1"># nested folder structure, move the contents there,</span>
    <span class="c1"># then rename the temp name to &lt;pipeline_name&gt;.</span>
    <span class="n">tests_target</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;tests&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;pipelines&quot;</span>
    <span class="n">full_path</span> <span class="o">=</span> <span class="n">_move_package_with_conflicting_name</span><span class="p">(</span>
        <span class="n">tests_target</span><span class="p">,</span> <span class="n">original_name</span><span class="o">=</span><span class="s2">&quot;tests&quot;</span><span class="p">,</span> <span class="n">desired_name</span><span class="o">=</span><span class="n">pipeline_name</span>
    <span class="p">)</span>
    <span class="n">refactored_tests_path</span> <span class="o">=</span> <span class="n">full_path</span> <span class="o">/</span> <span class="n">pipeline_name</span>

    <span class="k">return</span> <span class="n">refactored_package_path</span><span class="p">,</span> <span class="n">refactored_tests_path</span>


<span class="k">def</span> <span class="nf">_install_files</span><span class="p">(</span>
    <span class="n">project_metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">,</span>
    <span class="n">package_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">source_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">env</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="n">env</span> <span class="o">=</span> <span class="n">env</span> <span class="ow">or</span> <span class="s2">&quot;base&quot;</span>

    <span class="n">package_source</span><span class="p">,</span> <span class="n">test_source</span><span class="p">,</span> <span class="n">conf_source</span> <span class="o">=</span> <span class="n">_get_package_artifacts</span><span class="p">(</span>
        <span class="n">source_path</span><span class="p">,</span> <span class="n">package_name</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">conf_source</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span> <span class="ow">and</span> <span class="n">alias</span><span class="p">:</span>
        <span class="n">_rename_files</span><span class="p">(</span><span class="n">conf_source</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="n">alias</span><span class="p">)</span>

    <span class="n">pipeline_name</span> <span class="o">=</span> <span class="n">alias</span> <span class="ow">or</span> <span class="n">package_name</span>
    <span class="n">package_dest</span><span class="p">,</span> <span class="n">test_dest</span><span class="p">,</span> <span class="n">conf_dest</span> <span class="o">=</span> <span class="n">_get_pipeline_artifacts</span><span class="p">(</span>
        <span class="n">project_metadata</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="o">=</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">conf_source</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
        <span class="n">_sync_dirs</span><span class="p">(</span><span class="n">conf_source</span><span class="p">,</span> <span class="n">conf_dest</span><span class="p">)</span>
        <span class="c1"># `config` dir was packaged under `package_name` directory with</span>
        <span class="c1"># `kedro pipeline package`. Since `config` was already synced,</span>
        <span class="c1"># we don&#39;t want to copy it again when syncing the package, so we remove it.</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">conf_source</span><span class="p">))</span>

    <span class="n">project</span> <span class="o">=</span> <span class="n">Project</span><span class="p">(</span><span class="n">source_path</span><span class="p">)</span>
    <span class="n">refactored_package_source</span><span class="p">,</span> <span class="n">refactored_test_source</span> <span class="o">=</span> <span class="n">_refactor_code_for_unpacking</span><span class="p">(</span>
        <span class="n">project</span><span class="p">,</span> <span class="n">package_source</span><span class="p">,</span> <span class="n">test_source</span><span class="p">,</span> <span class="n">alias</span><span class="p">,</span> <span class="n">project_metadata</span>
    <span class="p">)</span>
    <span class="n">project</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">refactored_test_source</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
        <span class="n">_sync_dirs</span><span class="p">(</span><span class="n">refactored_test_source</span><span class="p">,</span> <span class="n">test_dest</span><span class="p">)</span>

    <span class="c1"># Sync everything under package directory, except `config`</span>
    <span class="c1"># since it has already been copied.</span>
    <span class="k">if</span> <span class="n">refactored_package_source</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
        <span class="n">_sync_dirs</span><span class="p">(</span><span class="n">refactored_package_source</span><span class="p">,</span> <span class="n">package_dest</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_find_config_files</span><span class="p">(</span>
    <span class="n">source_config_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">glob_patterns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
    <span class="n">config_files</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># type: List[Tuple[Path, str]]</span>

    <span class="k">if</span> <span class="n">source_config_dir</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
        <span class="n">config_files</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">source_config_dir</span><span class="p">)</span><span class="o">.</span><span class="n">as_posix</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">glob_pattern</span> <span class="ow">in</span> <span class="n">glob_patterns</span>
            <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">source_config_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">glob_pattern</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span>
        <span class="p">]</span>

    <span class="k">return</span> <span class="n">config_files</span>


<span class="k">def</span> <span class="nf">_get_default_version</span><span class="p">(</span><span class="n">metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="c1"># default to pipeline package version</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pipeline_module</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">metadata</span><span class="o">.</span><span class="n">package_name</span><span class="si">}</span><span class="s2">.pipelines.</span><span class="si">{</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pipeline_module</span><span class="o">.</span><span class="n">__version__</span>  <span class="c1"># type: ignore</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">ModuleNotFoundError</span><span class="p">):</span>
        <span class="c1"># if pipeline version doesn&#39;t exist, take the project one</span>
        <span class="n">project_module</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">metadata</span><span class="o">.</span><span class="n">package_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">project_module</span><span class="o">.</span><span class="n">__version__</span>  <span class="c1"># type: ignore</span>


<span class="k">def</span> <span class="nf">_package_pipeline</span><span class="p">(</span>  <span class="c1"># pylint: disable=too-many-arguments</span>
    <span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">,</span>
    <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">env</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
    <span class="n">package_dir</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">source_dir</span> <span class="o">/</span> <span class="n">metadata</span><span class="o">.</span><span class="n">package_name</span>
    <span class="n">env</span> <span class="o">=</span> <span class="n">env</span> <span class="ow">or</span> <span class="s2">&quot;base&quot;</span>

    <span class="n">artifacts_to_package</span> <span class="o">=</span> <span class="n">_get_pipeline_artifacts</span><span class="p">(</span>
        <span class="n">metadata</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="o">=</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span>
    <span class="p">)</span>
    <span class="c1"># as the wheel file will only contain parameters, we aren&#39;t listing other</span>
    <span class="c1"># config files not to confuse users and avoid useless file copies</span>
    <span class="n">configs_to_package</span> <span class="o">=</span> <span class="n">_find_config_files</span><span class="p">(</span>
        <span class="n">artifacts_to_package</span><span class="o">.</span><span class="n">pipeline_conf</span><span class="p">,</span>
        <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;parameters*/**/</span><span class="si">{</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">.yml&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;parameters*/**/</span><span class="si">{</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">/**/*&quot;</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="n">source_paths</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">artifacts_to_package</span><span class="o">.</span><span class="n">pipeline_dir</span><span class="p">,</span>
        <span class="n">artifacts_to_package</span><span class="o">.</span><span class="n">pipeline_tests</span><span class="p">,</span>
        <span class="n">configs_to_package</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Check that pipeline directory exists and not empty</span>
    <span class="n">_validate_dir</span><span class="p">(</span><span class="n">artifacts_to_package</span><span class="o">.</span><span class="n">pipeline_dir</span><span class="p">)</span>

    <span class="n">destination</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span> <span class="k">if</span> <span class="n">destination</span> <span class="k">else</span> <span class="n">package_dir</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;dist&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">version</span> <span class="ow">or</span> <span class="n">_get_default_version</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">)</span>

    <span class="n">_generate_wheel_file</span><span class="p">(</span>
        <span class="n">pipeline_name</span><span class="o">=</span><span class="n">pipeline_name</span><span class="p">,</span>
        <span class="n">destination</span><span class="o">=</span><span class="n">destination</span><span class="o">.</span><span class="n">resolve</span><span class="p">(),</span>
        <span class="n">source_paths</span><span class="o">=</span><span class="n">source_paths</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
        <span class="n">alias</span><span class="o">=</span><span class="n">alias</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">_clean_pycache</span><span class="p">(</span><span class="n">package_dir</span><span class="p">)</span>
    <span class="n">_clean_pycache</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">project_path</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">destination</span>


<span class="k">def</span> <span class="nf">_validate_dir</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory &#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39; doesn&#39;t exist.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">list</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">iterdir</span><span class="p">()):</span>
        <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39; is an empty directory.&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_get_wheel_name</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="c1"># https://stackoverflow.com/q/51939257/3364156</span>
    <span class="n">dist</span> <span class="o">=</span> <span class="n">Distribution</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">bdist_wheel_cmd</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">get_command_obj</span><span class="p">(</span><span class="s2">&quot;bdist_wheel&quot;</span><span class="p">)</span>
    <span class="n">bdist_wheel_cmd</span><span class="o">.</span><span class="n">ensure_finalized</span><span class="p">()</span>

    <span class="n">distname</span> <span class="o">=</span> <span class="n">bdist_wheel_cmd</span><span class="o">.</span><span class="n">wheel_dist_name</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="s2">&quot;-&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bdist_wheel_cmd</span><span class="o">.</span><span class="n">get_tag</span><span class="p">())</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">distname</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">.whl&quot;</span>


<span class="k">def</span> <span class="nf">_sync_path_list</span><span class="p">(</span><span class="n">source</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">target</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">source_path</span><span class="p">,</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">source</span><span class="p">:</span>
        <span class="n">target_with_suffix</span> <span class="o">=</span> <span class="p">(</span><span class="n">target</span> <span class="o">/</span> <span class="n">suffix</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
        <span class="n">_sync_dirs</span><span class="p">(</span><span class="n">source_path</span><span class="p">,</span> <span class="n">target_with_suffix</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_make_install_requires</span><span class="p">(</span><span class="n">requirements_txt</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Parses each line of requirements.txt into a version specifier valid to put in</span>
<span class="sd">    install_requires.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">requirements_txt</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="n">requirements</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">parse_requirements</span><span class="p">(</span><span class="n">requirements_txt</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
    <span class="k">return</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">requirement</span><span class="p">)</span> <span class="k">for</span> <span class="n">requirement</span> <span class="ow">in</span> <span class="n">requirements</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">_create_nested_package</span><span class="p">(</span><span class="n">project</span><span class="p">:</span> <span class="n">Project</span><span class="p">,</span> <span class="n">package_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
    <span class="c1"># fails if parts of the path exists already</span>
    <span class="n">packages</span> <span class="o">=</span> <span class="n">package_path</span><span class="o">.</span><span class="n">parts</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">generate</span><span class="o">.</span><span class="n">create_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">packages</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">nested_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">project</span><span class="o">.</span><span class="n">address</span><span class="p">)</span> <span class="o">/</span> <span class="n">packages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">packages</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">generate</span><span class="o">.</span><span class="n">create_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">package</span><span class="p">,</span> <span class="n">sourcefolder</span><span class="o">=</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">nested_path</span> <span class="o">=</span> <span class="n">nested_path</span> <span class="o">/</span> <span class="n">package</span>
    <span class="k">return</span> <span class="n">nested_path</span>


<span class="k">def</span> <span class="nf">_move_package</span><span class="p">(</span><span class="n">project</span><span class="p">:</span> <span class="n">Project</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Move a Python package, refactoring relevant imports along the way.</span>
<span class="sd">    A target of empty string means moving to the root of the `project`.</span>

<span class="sd">    Args:</span>
<span class="sd">        project: rope.base.Project holding the scope of the refactoring.</span>
<span class="sd">        source: Name of the Python package to be moved. Can be a fully</span>
<span class="sd">            qualified module path relative to the `project` root, e.g.</span>
<span class="sd">            &quot;package.pipelines.pipeline&quot; or &quot;package/pipelines/pipeline&quot;.</span>
<span class="sd">        target: Destination of the Python package to be moved. Can be a fully</span>
<span class="sd">            qualified module path relative to the `project` root, e.g.</span>
<span class="sd">            &quot;package.pipelines.pipeline&quot; or &quot;package/pipelines/pipeline&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">src_folder</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">get_module</span><span class="p">(</span><span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">get_resource</span><span class="p">()</span>
    <span class="n">target_folder</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">get_module</span><span class="p">(</span><span class="n">target</span><span class="p">)</span><span class="o">.</span><span class="n">get_resource</span><span class="p">()</span>
    <span class="n">change</span> <span class="o">=</span> <span class="n">MoveModule</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">src_folder</span><span class="p">)</span><span class="o">.</span><span class="n">get_changes</span><span class="p">(</span><span class="n">dest</span><span class="o">=</span><span class="n">target_folder</span><span class="p">)</span>
    <span class="n">project</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">change</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_rename_package</span><span class="p">(</span><span class="n">project</span><span class="p">:</span> <span class="n">Project</span><span class="p">,</span> <span class="n">old_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Rename a Python package, refactoring relevant imports along the way,</span>
<span class="sd">    as well as references in comments.</span>

<span class="sd">    Args:</span>
<span class="sd">        project: rope.base.Project holding the scope of the refactoring.</span>
<span class="sd">        old_name: Old module name. Can be a fully qualified module path,</span>
<span class="sd">            e.g. &quot;package.pipelines.pipeline&quot; or &quot;package/pipelines/pipeline&quot;,</span>
<span class="sd">            relative to the `project` root.</span>
<span class="sd">        new_name: New module name. Can&#39;t be a fully qualified module path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">get_folder</span><span class="p">(</span><span class="n">old_name</span><span class="p">)</span>
    <span class="n">change</span> <span class="o">=</span> <span class="n">Rename</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">folder</span><span class="p">)</span><span class="o">.</span><span class="n">get_changes</span><span class="p">(</span><span class="n">new_name</span><span class="p">,</span> <span class="n">docs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">project</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">change</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_refactor_code_for_package</span><span class="p">(</span>
    <span class="n">project</span><span class="p">:</span> <span class="n">Project</span><span class="p">,</span>
    <span class="n">package_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">tests_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">alias</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">project_metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;In order to refactor the imports properly, we need to recreate</span>
<span class="sd">    the same nested structure as in the project. Therefore, we create:</span>
<span class="sd">    &lt;temp_dir&gt;  # also the root of the Rope project</span>
<span class="sd">    |__ &lt;package&gt;</span>
<span class="sd">        |__ __init__.py</span>
<span class="sd">        |__ pipelines</span>
<span class="sd">            |__ __init__.py</span>
<span class="sd">            |__ &lt;pipeline_name&gt;</span>
<span class="sd">                |__ __init__.py</span>
<span class="sd">    |__ tests</span>
<span class="sd">        |__ __init__.py</span>
<span class="sd">        |__ pipelines</span>
<span class="sd">            |__ __init__.py</span>
<span class="sd">            |__ &lt;pipeline_name&gt;</span>
<span class="sd">                |__ __init__.py</span>
<span class="sd">    We then move &lt;pipeline_name&gt; outside of package src to top level (&quot;&quot;)</span>
<span class="sd">    in temp_dir, and rename folder &amp; imports if alias provided.</span>

<span class="sd">    For tests, we need to extract all the contents of &lt;pipeline_name&gt;</span>
<span class="sd">    at into top-level `tests` folder. This is not possible in one go with</span>
<span class="sd">    the Rope API, so we have to do it in a bit of a hacky way.</span>
<span class="sd">    We rename &lt;pipeline_name&gt; to a `tmp_name` and move it at top-level (&quot;&quot;)</span>
<span class="sd">    in temp_dir. We remove the old `tests` folder and rename `tmp_name` to `tests`.</span>

<span class="sd">    The final structure should be:</span>
<span class="sd">    &lt;temp_dir&gt;  # also the root of the Rope project</span>
<span class="sd">    |__ &lt;pipeline_name&gt;  # or &lt;alias&gt;</span>
<span class="sd">        |__ __init__.py</span>
<span class="sd">    |__ tests  # only tests for &lt;pipeline_name&gt;</span>
<span class="sd">        |__ __init__.py</span>
<span class="sd">        |__ test_pipeline.py</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_move_package_with_conflicting_name</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">conflicting_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">tmp_name</span> <span class="o">=</span> <span class="s2">&quot;tmp_name&quot;</span>
        <span class="n">tmp_module</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="n">tmp_name</span>
        <span class="n">_rename_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">target</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span> <span class="n">tmp_name</span><span class="p">)</span>
        <span class="n">_move_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">tmp_module</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">project</span><span class="o">.</span><span class="n">address</span><span class="p">)</span> <span class="o">/</span> <span class="n">conflicting_name</span><span class="p">)</span>
        <span class="n">_rename_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">tmp_name</span><span class="p">,</span> <span class="n">conflicting_name</span><span class="p">)</span>

    <span class="c1"># Copy source in appropriate folder structure</span>
    <span class="n">package_target</span> <span class="o">=</span> <span class="n">package_path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">project_metadata</span><span class="o">.</span><span class="n">source_dir</span><span class="p">)</span>
    <span class="n">full_path</span> <span class="o">=</span> <span class="n">_create_nested_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">package_target</span><span class="p">)</span>
    <span class="c1"># overwrite=True to update the __init__.py files generated by create_package</span>
    <span class="n">_sync_dirs</span><span class="p">(</span><span class="n">package_path</span><span class="p">,</span> <span class="n">full_path</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Copy tests in appropriate folder structure</span>
    <span class="k">if</span> <span class="n">tests_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">tests_target</span> <span class="o">=</span> <span class="n">tests_path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">project_metadata</span><span class="o">.</span><span class="n">source_dir</span><span class="p">)</span>
        <span class="n">full_path</span> <span class="o">=</span> <span class="n">_create_nested_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">tests_target</span><span class="p">)</span>
        <span class="c1"># overwrite=True to update the __init__.py files generated by create_package</span>
        <span class="n">_sync_dirs</span><span class="p">(</span><span class="n">tests_path</span><span class="p">,</span> <span class="n">full_path</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Refactor imports in src/package_name/pipelines/pipeline_name</span>
    <span class="c1"># and imports of `pipeline_name` in tests.</span>
    <span class="n">pipeline_name</span> <span class="o">=</span> <span class="n">package_target</span><span class="o">.</span><span class="n">stem</span>
    <span class="k">if</span> <span class="n">pipeline_name</span> <span class="o">==</span> <span class="n">project_metadata</span><span class="o">.</span><span class="n">package_name</span><span class="p">:</span>
        <span class="n">_move_package_with_conflicting_name</span><span class="p">(</span><span class="n">package_target</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_move_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">package_target</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">project</span><span class="o">.</span><span class="n">address</span><span class="p">)</span> <span class="o">/</span> <span class="n">project_metadata</span><span class="o">.</span><span class="n">package_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">alias</span><span class="p">:</span>
        <span class="n">_rename_package</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">,</span> <span class="n">alias</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">tests_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="c1"># we can&#39;t move the relevant tests folder as is because</span>
        <span class="c1"># it will conflict with the top-level package &lt;pipeline_name&gt;;</span>
        <span class="c1"># we can&#39;t rename it &quot;tests&quot; and move it, because it will conflict</span>
        <span class="c1"># with the existing &quot;tests&quot; folder at top level;</span>
        <span class="c1"># hence we give it a temp name, move it, delete tests/ and</span>
        <span class="c1"># rename the temp name to tests.</span>
        <span class="n">_move_package_with_conflicting_name</span><span class="p">(</span><span class="n">tests_target</span><span class="p">,</span> <span class="s2">&quot;tests&quot;</span><span class="p">)</span>


<span class="n">_SourcePathType</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span>


<span class="c1"># pylint: disable=too-many-arguments,too-many-locals</span>
<span class="k">def</span> <span class="nf">_generate_wheel_file</span><span class="p">(</span>
    <span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">destination</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">source_paths</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">_SourcePathType</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">,</span>
    <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">package_name</span> <span class="o">=</span> <span class="n">alias</span> <span class="ow">or</span> <span class="n">pipeline_name</span>
    <span class="n">package_source</span><span class="p">,</span> <span class="n">tests_source</span><span class="p">,</span> <span class="n">conf_source</span> <span class="o">=</span> <span class="n">source_paths</span>

    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">temp_dir</span><span class="p">:</span>
        <span class="n">temp_dir_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>

        <span class="n">project</span> <span class="o">=</span> <span class="n">Project</span><span class="p">(</span><span class="n">temp_dir_path</span><span class="p">)</span>  <span class="c1"># project where to do refactoring</span>
        <span class="n">_refactor_code_for_package</span><span class="p">(</span>  <span class="c1"># type: ignore</span>
            <span class="n">project</span><span class="p">,</span> <span class="n">package_source</span><span class="p">,</span> <span class="n">tests_source</span><span class="p">,</span> <span class="n">alias</span><span class="p">,</span> <span class="n">metadata</span>
        <span class="p">)</span>
        <span class="n">project</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="c1"># Copy &amp; &quot;refactor&quot; config</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">conf_target</span> <span class="o">=</span> <span class="n">_get_package_artifacts</span><span class="p">(</span><span class="n">temp_dir_path</span><span class="p">,</span> <span class="n">package_name</span><span class="p">)</span>
        <span class="n">_sync_path_list</span><span class="p">(</span><span class="n">conf_source</span><span class="p">,</span> <span class="n">conf_target</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">if</span> <span class="n">conf_target</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span> <span class="ow">and</span> <span class="n">alias</span><span class="p">:</span>
            <span class="n">_rename_files</span><span class="p">(</span><span class="n">conf_target</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">,</span> <span class="n">alias</span><span class="p">)</span>

        <span class="c1"># Build a setup.py on the fly</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">install_requires</span> <span class="o">=</span> <span class="n">_make_install_requires</span><span class="p">(</span>
                <span class="n">package_source</span> <span class="o">/</span> <span class="s2">&quot;requirements.txt&quot;</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;FAILED&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
            <span class="bp">cls</span> <span class="o">=</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span>
            <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>

        <span class="n">config_files</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">conf_target</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">is_file</span><span class="p">()]</span>
        <span class="n">setup_file</span> <span class="o">=</span> <span class="n">_generate_setup_file</span><span class="p">(</span>
            <span class="n">package_name</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">install_requires</span><span class="p">,</span> <span class="n">temp_dir_path</span><span class="p">,</span> <span class="n">config_files</span>
        <span class="p">)</span>

        <span class="n">package_file</span> <span class="o">=</span> <span class="n">destination</span> <span class="o">/</span> <span class="n">_get_wheel_name</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">package_file</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Package file </span><span class="si">{</span><span class="n">package_file</span><span class="si">}</span><span class="s2"> will be overwritten!&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span>
            <span class="p">)</span>

        <span class="c1"># python setup.py bdist_wheel --dist-dir &lt;destination&gt;</span>
        <span class="n">call</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">setup_file</span><span class="o">.</span><span class="n">resolve</span><span class="p">()),</span>
                <span class="s2">&quot;bdist_wheel&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--dist-dir&quot;</span><span class="p">,</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">destination</span><span class="p">),</span>
            <span class="p">],</span>
            <span class="n">cwd</span><span class="o">=</span><span class="n">temp_dir</span><span class="p">,</span>
        <span class="p">)</span>


<span class="k">def</span> <span class="nf">_generate_setup_file</span><span class="p">(</span>
    <span class="n">package_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">install_requires</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">output_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">config_files</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
    <span class="n">setup_file</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;setup.py&quot;</span>

    <span class="n">package_data</span> <span class="o">=</span> <span class="p">{</span><span class="n">package_name</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;README.md&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">config_files</span><span class="p">}</span>
    <span class="n">setup_file_context</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
        <span class="n">package_data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">package_data</span><span class="p">),</span>
        <span class="n">install_requires</span><span class="o">=</span><span class="n">install_requires</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">setup_file</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">_SETUP_PY_TEMPLATE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">setup_file_context</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">setup_file</span>


<span class="k">def</span> <span class="nf">_create_pipeline</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">_filter_deprecation_warnings</span><span class="p">():</span>
        <span class="c1"># pylint: disable=import-outside-toplevel</span>
        <span class="kn">from</span> <span class="nn">cookiecutter.main</span> <span class="kn">import</span> <span class="n">cookiecutter</span>

    <span class="n">template_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">kedro</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;templates&quot;</span> <span class="o">/</span> <span class="s2">&quot;pipeline&quot;</span>
    <span class="n">cookie_context</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pipeline_name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;kedro_version&quot;</span><span class="p">:</span> <span class="n">kedro</span><span class="o">.</span><span class="n">__version__</span><span class="p">}</span>

    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating the pipeline `</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">`: &quot;</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">result_path</span> <span class="o">=</span> <span class="n">cookiecutter</span><span class="p">(</span>
            <span class="nb">str</span><span class="p">(</span><span class="n">template_path</span><span class="p">),</span>
            <span class="n">output_dir</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">output_dir</span><span class="p">),</span>
            <span class="n">no_input</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">extra_context</span><span class="o">=</span><span class="n">cookie_context</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;FAILED&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>

    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>
    <span class="n">result_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">result_path</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">indent</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Location: `</span><span class="si">{</span><span class="n">result_path</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="si">}</span><span class="s2">`&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">_clean_pycache</span><span class="p">(</span><span class="n">result_path</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result_path</span>


<span class="c1"># pylint: disable=missing-raises-doc</span>
<span class="k">def</span> <span class="nf">_sync_dirs</span><span class="p">(</span><span class="n">source</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Recursively copies `source` directory (or file) into `target` directory without</span>
<span class="sd">    overwriting any existing files/directories in the target using the following</span>
<span class="sd">    rules:</span>
<span class="sd">        1) Skip any files/directories which names match with files in target,</span>
<span class="sd">        unless overwrite=True.</span>
<span class="sd">        2) Copy all files from source to target.</span>
<span class="sd">        3) Recursively copy all directories from source to target.</span>

<span class="sd">    Args:</span>
<span class="sd">        source: A local directory to copy from, must exist.</span>
<span class="sd">        target: A local directory to copy to, will be created if doesn&#39;t exist yet.</span>
<span class="sd">        prefix: Prefix for CLI message indentation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">existing</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">iterdir</span><span class="p">())</span> <span class="k">if</span> <span class="n">target</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()</span> <span class="k">else</span> <span class="p">[]</span>
    <span class="n">existing_files</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">existing</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_file</span><span class="p">()}</span>
    <span class="n">existing_folders</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">existing</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()}</span>

    <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
        <span class="n">content</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">iterdir</span><span class="p">())</span>
    <span class="k">elif</span> <span class="n">source</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
        <span class="n">content</span> <span class="o">=</span> <span class="p">[</span><span class="n">source</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># nothing to copy</span>
        <span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># pragma: no cover</span>

    <span class="k">for</span> <span class="n">source_path</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
        <span class="n">source_name</span> <span class="o">=</span> <span class="n">source_path</span><span class="o">.</span><span class="n">name</span>
        <span class="n">target_path</span> <span class="o">=</span> <span class="n">target</span> <span class="o">/</span> <span class="n">source_name</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">indent</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating `</span><span class="si">{</span><span class="n">target_path</span><span class="si">}</span><span class="s2">`: &quot;</span><span class="p">,</span> <span class="n">prefix</span><span class="p">),</span> <span class="n">nl</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>  <span class="c1"># rule #1</span>
            <span class="ow">not</span> <span class="n">overwrite</span>
            <span class="ow">and</span> <span class="n">source_name</span> <span class="ow">in</span> <span class="n">existing_files</span>
            <span class="ow">or</span> <span class="n">source_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span>
            <span class="ow">and</span> <span class="n">source_name</span> <span class="ow">in</span> <span class="n">existing_folders</span>
        <span class="p">):</span>
            <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;SKIPPED (already exists)&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">source_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>  <span class="c1"># rule #2</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">target</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">source_path</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">target_path</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;FAILED&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
                <span class="k">raise</span>
            <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># source_path is a directory, rule #3</span>
            <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">()</span>
            <span class="n">new_prefix</span> <span class="o">=</span> <span class="p">(</span><span class="n">prefix</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">2</span>
            <span class="n">_sync_dirs</span><span class="p">(</span><span class="n">source_path</span><span class="p">,</span> <span class="n">target_path</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="n">new_prefix</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_get_pipeline_artifacts</span><span class="p">(</span>
    <span class="n">project_metadata</span><span class="p">:</span> <span class="n">ProjectMetadata</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">env</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineArtifacts</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;From existing project, returns in order: source_path, tests_path, config_paths&quot;&quot;&quot;</span>
    <span class="n">package_dir</span> <span class="o">=</span> <span class="n">project_metadata</span><span class="o">.</span><span class="n">source_dir</span> <span class="o">/</span> <span class="n">project_metadata</span><span class="o">.</span><span class="n">package_name</span>
    <span class="n">conf_root</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">CONF_ROOT</span>
    <span class="n">project_conf_path</span> <span class="o">=</span> <span class="n">project_metadata</span><span class="o">.</span><span class="n">project_path</span> <span class="o">/</span> <span class="n">conf_root</span>
    <span class="n">artifacts</span> <span class="o">=</span> <span class="n">PipelineArtifacts</span><span class="p">(</span>
        <span class="n">package_dir</span> <span class="o">/</span> <span class="s2">&quot;pipelines&quot;</span> <span class="o">/</span> <span class="n">pipeline_name</span><span class="p">,</span>
        <span class="n">package_dir</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;pipelines&quot;</span> <span class="o">/</span> <span class="n">pipeline_name</span><span class="p">,</span>
        <span class="n">project_conf_path</span> <span class="o">/</span> <span class="n">env</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">artifacts</span>


<span class="k">def</span> <span class="nf">_get_package_artifacts</span><span class="p">(</span>
    <span class="n">source_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">package_name</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Path</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;From existing unpacked wheel, returns in order:</span>
<span class="sd">    source_path, tests_path, config_path</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">artifacts</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">source_path</span> <span class="o">/</span> <span class="n">package_name</span><span class="p">,</span>
        <span class="n">source_path</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span><span class="p">,</span>
        <span class="c1"># package_data (non-python files) needs to live inside one of the packages</span>
        <span class="n">source_path</span> <span class="o">/</span> <span class="n">package_name</span> <span class="o">/</span> <span class="s2">&quot;config&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">artifacts</span>


<span class="k">def</span> <span class="nf">_copy_pipeline_tests</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">result_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">package_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>
    <span class="n">tests_source</span> <span class="o">=</span> <span class="n">result_path</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span>
    <span class="n">tests_target</span> <span class="o">=</span> <span class="n">package_dir</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;pipelines&quot;</span> <span class="o">/</span> <span class="n">pipeline_name</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">_sync_dirs</span><span class="p">(</span><span class="n">tests_source</span><span class="p">,</span> <span class="n">tests_target</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">tests_source</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_copy_pipeline_configs</span><span class="p">(</span>
    <span class="n">result_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">conf_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">skip_config</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">env</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">):</span>
    <span class="n">config_source</span> <span class="o">=</span> <span class="n">result_path</span> <span class="o">/</span> <span class="s2">&quot;config&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_config</span><span class="p">:</span>
            <span class="n">config_target</span> <span class="o">=</span> <span class="n">conf_path</span> <span class="o">/</span> <span class="n">env</span>
            <span class="n">_sync_dirs</span><span class="p">(</span><span class="n">config_source</span><span class="p">,</span> <span class="n">config_target</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">config_source</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_delete_artifacts</span><span class="p">(</span><span class="o">*</span><span class="n">artifacts</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">artifact</span> <span class="ow">in</span> <span class="n">artifacts</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting `</span><span class="si">{</span><span class="n">artifact</span><span class="si">}</span><span class="s2">`: &quot;</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">artifact</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">artifact</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">artifact</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;FAILED&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
            <span class="bp">cls</span> <span class="o">=</span> <span class="n">exc</span><span class="o">.</span><span class="vm">__class__</span>
            <span class="k">raise</span> <span class="n">KedroCliError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_append_package_reqs</span><span class="p">(</span>
    <span class="n">requirements_in</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">package_reqs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Appends modular pipeline requirements to project level requirements.in&quot;&quot;&quot;</span>
    <span class="n">existing_reqs</span> <span class="o">=</span> <span class="n">_safe_parse_requirements</span><span class="p">(</span><span class="n">requirements_in</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
    <span class="n">incoming_reqs</span> <span class="o">=</span> <span class="n">_safe_parse_requirements</span><span class="p">(</span><span class="n">package_reqs</span><span class="p">)</span>
    <span class="n">reqs_to_add</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">incoming_reqs</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">existing_reqs</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">reqs_to_add</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">sorted_reqs</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">req</span><span class="p">)</span> <span class="k">for</span> <span class="n">req</span> <span class="ow">in</span> <span class="n">reqs_to_add</span><span class="p">)</span>
    <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">requirements_in</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2"># Additional requirements from modular pipeline `</span><span class="si">{</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">`:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sorted_reqs</span><span class="p">))</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Added the following requirements from modular pipeline `</span><span class="si">{</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">` to &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;requirements.in:</span><span class="se">\n</span><span class="si">{</span><span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sorted_reqs</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
    <span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span>
        <span class="s2">&quot;Use `kedro install --build-reqs` to compile and install the updated list of &quot;</span>
        <span class="s2">&quot;requirements.&quot;</span>
    <span class="p">)</span>


<span class="k">def</span> <span class="nf">_safe_parse_requirements</span><span class="p">(</span>
    <span class="n">requirements</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="n">pkg_resources</span><span class="o">.</span><span class="n">Requirement</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Safely parse a requirement or set of requirements. This effectively replaces</span>
<span class="sd">    pkg_resources.parse_requirements, which blows up with a ValueError as soon as it</span>
<span class="sd">    encounters a requirement it cannot parse (e.g. `-r requirements.txt`). This way</span>
<span class="sd">    we can still extract all the parseable requirements out of a set containing some</span>
<span class="sd">    unparseable requirements.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parseable_requirements</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">requirement</span> <span class="ow">in</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">yield_lines</span><span class="p">(</span><span class="n">requirements</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parseable_requirements</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pkg_resources</span><span class="o">.</span><span class="n">Requirement</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">requirement</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">continue</span>
    <span class="k">return</span> <span class="n">parseable_requirements</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'0.17.6',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../../../_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>

  

  <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>